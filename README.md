# semantic-complexity

**ë‹¤ì°¨ì› ì½”ë“œ ë³µì¡ë„ ë¶„ì„ê¸°** â€” McCabe ìˆœí™˜ ë³µì¡ë„ë¥¼ ë„˜ì–´, ì‹¤ì œ ìœ ì§€ë³´ìˆ˜ ë‚œì´ë„ë¥¼ ì •ëŸ‰í™”í•©ë‹ˆë‹¤.

## í•µì‹¬ ì•„ì´ë””ì–´

### ë¬¸ì œ: ë‹¨ì¼ ì§€í‘œì˜ í•œê³„

```
McCabe = 10 (ë‹¨ìˆœí•´ ë³´ì„)
ì‹¤ì œë¡œëŠ” async 3ì¤‘ ì¤‘ì²© + ì „ì—­ ìƒíƒœ + í´ë¡œì € 5ê°œ = ìœ ì§€ë³´ìˆ˜ ì§€ì˜¥
```

McCabe ë³µì¡ë„ëŠ” ë¶„ê¸°ì ë§Œ ì¸¡ì •í•˜ì—¬ **ìˆ¨ê²¨ì§„ ë³µì¡ë„**ë¥¼ ë°˜ì˜í•˜ì§€ ëª»í•©ë‹ˆë‹¤.

### í•´ê²°: ë‹¤ì°¨ì› ë³µì¡ë„

| ì°¨ì› | ê°€ì¤‘ì¹˜ | ì¸¡ì • í•­ëª© |
|------|--------|----------|
| 1D Control | Ã—1.0 | if, switch, loop, ë…¼ë¦¬ì—°ì‚°ì |
| 2D Nesting | Ã—1.5 | ì¤‘ì²© ê¹Šì´, ì½œë°±, ì¬ê·€ |
| 3D State | Ã—2.0 | ìƒíƒœ ë³€ì´, hooks, ìƒíƒœ ê¸°ê³„ |
| 4D Async | Ã—2.5 | async/await, Promise, ë™ì‹œì„± |
| 5D Coupling | Ã—3.0 | ì „ì—­ ì ‘ê·¼, I/O, ë¶€ìˆ˜íš¨ê³¼, í´ë¡œì € |

## ì„¤ê³„ ì² í•™ (v0.0.2+)

### í–„ ìƒŒë“œìœ„ì¹˜ ì •ë¦¬ì—ì„œ ì°©ì•ˆ

[ìœ„ìƒìˆ˜í•™ì˜ í–„ ìƒŒë“œìœ„ì¹˜ ì •ë¦¬](https://en.wikipedia.org/wiki/Ham_sandwich_theorem):
> nì°¨ì› ìœ í´ë¦¬ë“œ ê³µê°„ì—ì„œ nê°œì˜ ì¸¡ì • ê°€ëŠ¥í•œ ê°ì²´ê°€ ì£¼ì–´ì§€ë©´, ë‹¨ì¼ (n-1)ì°¨ì› ì´ˆí‰ë©´ìœ¼ë¡œ ëª¨ë“  ê°ì²´ë¥¼ ë™ì‹œì— ì´ë“±ë¶„í•  ìˆ˜ ìˆë‹¤.

Borsuk-Ulam ì •ë¦¬ë¡œ ì¦ëª…ë˜ë©°, **ê· í˜•ì ì˜ ì¡´ì¬ë¥¼ ë³´ì¥**í•©ë‹ˆë‹¤.

ì½”ë“œ í’ˆì§ˆ ê³µê°„ì„ 3ê°œì˜ ì§êµ ì¶•ìœ¼ë¡œ ë¶„í•´:

| ì¶• | ì´ë¦„ | ì˜ë¯¸ |
|----|------|------|
| ğŸ | Security | êµ¬ì¡° ì•ˆì •ì„±, ë³´ì•ˆ ê²½ê³„ |
| ğŸ§€ | Context | ë§¥ë½ ë°€ë„, ì¸ì§€ ë³µì¡ë„ |
| ğŸ¥“ | Behavior | í–‰ë™ ë³´ì¡´ì„±, ìœ ì§€ë³´ìˆ˜ì„± |

**ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬**: 3ìƒ‰ ë¼ë²¨ë§ëœ ì‚¼ê°ë¶„í• ì—ì„œ ê· í˜•ì  ì¡´ì¬ â†’ ë°˜ë³µ í•„í„°ë§ìœ¼ë¡œ ì´ìƒì  í˜•íƒœì— ìˆ˜ë ´ ê°€ëŠ¥

### P-NP ë¬¸ì œì˜ ëª¨ë“ˆë³„ íŠ¹ìˆ˜í•´

ì½”ë“œ ìµœì í™”ëŠ” NP-hard ë¬¸ì œì…ë‹ˆë‹¤:

| ë¬¸ì œ | ë³µì¡ë„ |
|------|--------|
| ìµœì  ëª¨ë“ˆ ë¶„í•  | NP-hard |
| ìˆœí™˜ ì˜ì¡´ì„± ìµœì†Œ ì œê±° | NP-hard |
| ì „ì—­ ìµœì  ë¦¬íŒ©í† ë§ | NP-hard |

**í•´ê²° ì ‘ê·¼**: ëª¨ë“ˆ íƒ€ì…ì„ ì œì•½ ì¡°ê±´ìœ¼ë¡œ ì¶”ê°€

```
ì¼ë°˜ ë¬¸ì œ (NP-hard) + ëª¨ë“ˆ íƒ€ì… ì œì•½ = ì œì•½ëœ ë¬¸ì œ (P)
```

SAT ë¬¸ì œì™€ ë™ì¼í•œ êµ¬ì¡°ì…ë‹ˆë‹¤:
- ì¼ë°˜ SAT: NP-complete
- 2-SAT, Horn-SAT: P (êµ¬ì¡°ì  ì œì•½ìœ¼ë¡œ ì¸í•´)

ê° ëª¨ë“ˆ íƒ€ì…ì´ **ë…ë¦½ëœ ë¬¸ì œ í´ë˜ìŠ¤**ê°€ ë˜ì–´, í•´ë‹¹ í´ë˜ìŠ¤ ë‚´ì—ì„œ ì¼ë°˜í•´ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.

### ëª¨ë“ˆ íƒ€ì…ê³¼ ì •ì¤€í˜•

```typescript
type ModuleType = 'api' | 'app' | 'lib' | 'deploy';
```

| íƒ€ì… | ì—­í•  | ì •ì¤€ íŠ¹ì„± |
|------|------|-----------|
| `api` | ê²½ê³„ë©´ | ì–‡ì€ ë ˆì´ì–´, ë¬´ìƒíƒœ, ê²€ì¦ ì§‘ì¤‘ |
| `app` | ì‘ìš© ë¡œì§ | ìƒíƒœ/ë¹„ë™ê¸° í—ˆìš©, ê²©ë¦¬ë¨ |
| `lib` | ë¼ì´ë¸ŒëŸ¬ë¦¬ | ìˆœìˆ˜ í•¨ìˆ˜, ê³ ì‘ì§‘, ì €ê²°í•© |
| `deploy` | ë°°í¬ êµ¬ì„± | ì„ ì–¸ì , ë¡œì§ ìµœì†Œ |

### ë©”íƒ€ ì°¨ì›

5ê°œ ì°¨ì›ì„ 3ê°œ ìƒìœ„ ì¶•(ğŸğŸ§€ğŸ¥“)ìœ¼ë¡œ ì§‘ê³„:

| ë©”íƒ€ ì°¨ì› | êµ¬ì„± | ì˜ë¯¸ |
|-----------|------|------|
| ğŸ **Security** | coupling + global + env | êµ¬ì¡° ì•ˆì •ì„± |
| ğŸ§€ **Context** | cognitive + nesting + callback | ë§¥ë½ ë°€ë„ |
| ğŸ¥“ **Behavior** | state + async + sideEffects | í–‰ë™ ë³´ì¡´ì„± |

### ìˆ˜ë ´ ë¶„ì„

```typescript
const result = analyzeConvergence({
  filePath: './src/api/users.ts',
  moduleType: 'api',
});

// ê²°ê³¼
{
  deviation: { security: 0.2, context: 1.5, behavior: 0.8 },
  isStable: false,
  suggestion: "Context ë³µì¡ë„ê°€ API ê²½ê³„ë©´ ê¸°ì¤€ ì´ˆê³¼"
}
```

## íŒ¨í‚¤ì§€ êµ¬ì¡°

```
packages/
â”œâ”€â”€ core/     # semantic-complexity (ë¶„ì„ ì—”ì§„)
â”œâ”€â”€ cli/      # semantic-complexity-cli (CLI)
â””â”€â”€ mcp/      # semantic-complexity-mcp (Claude Code ì—°ë™)
```

## ì„¤ì¹˜

```bash
npm install semantic-complexity
npm install -g semantic-complexity-cli
```

## CLI ì‚¬ìš©

```bash
# í”„ë¡œì íŠ¸ ìš”ì•½
semantic-complexity summary ./src

# HTML ë¦¬í¬íŠ¸
semantic-complexity analyze ./src -o report -f html

# JSON ë¦¬í¬íŠ¸
semantic-complexity analyze ./src --json
```

### ì¶œë ¥ ì˜ˆì‹œ

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 Summary
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Files:        30
  Functions:    268
  Avg McCabe:   2.6
  Avg Dimensional: 21
  Avg Ratio:    8.18x
  High-Risk:    56 functions

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 Dimension Breakdown
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  1D Control   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘    687 (avg: 2.6)
  2D Nesting   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘    667 (avg: 2.5)
  3D State     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  741.5 (avg: 2.8)
  4D Async     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘    248 (avg: 0.9)
  5D Coupling  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘    570 (avg: 2.1)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 Hotspots (Top 5)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  Function          McCabe  Dimensional  Ratio  Primary
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Signup                81          802   9.9x  2D-nesting
  PatientOverview       47        415.5  8.84x  3D-state
  Sidebar                7          209 29.86x  5D-coupling
```

### Ratio í•´ì„

```
Ratio = Dimensional / McCabe

< 3x    ë‹¨ìˆœí•œ ì œì–´ íë¦„
3-5x    ì¼ë°˜ì ì¸ ë³µì¡ë„
5-10x   ìˆ¨ê²¨ì§„ ë³µì¡ë„, ì£¼ì˜ í•„ìš”
> 10x   ë¦¬íŒ©í† ë§ ê¶Œì¥
```

## í”„ë¡œê·¸ë˜ë§¤í‹± ì‚¬ìš©

```typescript
import { analyzeFilePath, analyzeFunctionExtended } from 'semantic-complexity';

const result = analyzeFilePath('./src/components/Login.tsx');

for (const func of result.functions) {
  console.log(func.function.name, func.dimensional);
}
```

## MCP ì—°ë™

í”„ë¡œì íŠ¸ì— `.mcp.json`:

```json
{
  "mcpServers": {
    "complexity": {
      "type": "stdio",
      "command": "npx",
      "args": ["semantic-complexity-mcp"]
    }
  }
}
```

Claude Codeì—ì„œ:

```
"Login.tsx ë³µì¡ë„ ë¶„ì„í•´ì¤˜"
"ê°€ì¥ ë³µì¡í•œ í•¨ìˆ˜ 10ê°œ ì°¾ì•„ì¤˜"
"Signup ë¦¬íŒ©í† ë§ ì œì•ˆí•´ì¤˜"
```

## ë¡œë“œë§µ

- **v0.0.1**: 5ì°¨ì› ë³µì¡ë„ ë¶„ì„ (í˜„ì¬)
- **v0.0.2**: ëª¨ë“ˆ íƒ€ì… ê¸°ë°˜ ì •ì¤€ì„± í”„ë ˆì„ì›Œí¬
  - ë©”íƒ€ ì°¨ì› (Security/Context/Behavior)
  - ìˆ˜ë ´ ë¶„ì„
  - Delta ê¸°ë°˜ í’ˆì§ˆ ê²Œì´íŠ¸

ìì„¸í•œ ë³€ê²½ ì‚¬í•­ì€ [CHANGELOG.md](./CHANGELOG.md)ë¥¼ ì°¸ì¡°í•˜ì„¸ìš”.

## ë¼ì´ì„ ìŠ¤

MIT
