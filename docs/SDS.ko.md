# ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ ëª…ì„¸ì„œ (SDS)
# semantic-complexity v1.0

---

## 1. ê°œìš”

### 1.1 ëª©ì 

ë³¸ ë¬¸ì„œëŠ” [SRS.ko.md](./SRS.ko.md)ì˜ ìš”êµ¬ì‚¬í•­ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ **ì„¤ê³„ ê²°ì •ê³¼ ì•Œê³ ë¦¬ì¦˜**ì„ ëª…ì„¸í•©ë‹ˆë‹¤.

### 1.2 ê´€ë ¨ ë¬¸ì„œ

| ë¬¸ì„œ | ì—­í•  |
|------|------|
| [THEORY.ko.md](../THEORY.ko.md) | ì´ë¡ ì  í† ëŒ€ (ì™œ) |
| [SRS.ko.md](./SRS.ko.md) | ìš”êµ¬ì‚¬í•­ (ë¬´ì—‡ì„) |
| ë³¸ ë¬¸ì„œ | ì„¤ê³„ (ì–´ë–»ê²Œ) |

---

## 2. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 2.1 ML íŒŒì´í”„ë¼ì¸ êµ¬ì¡°

ì‹œìŠ¤í…œì€ ML íŒŒì´í”„ë¼ì¸ê³¼ ìœ ì‚¬í•œ 3ë‹¨ê³„ ì²˜ë¦¬ êµ¬ì¡°ë¥¼ ë”°ë¦…ë‹ˆë‹¤:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  INPUT (Feature Extraction)                          [ë°ì´í„° ìˆ˜ì§‘] â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â•‘
â•‘  â”‚   Source     â”‚â”€â”€â”€â–¶â”‚           Language Parsers               â”‚ â•‘
â•‘  â”‚    Code      â”‚    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ py_parser â”‚ go_parser â”‚ ts_parser â”‚ ...  â”‚ â•‘
â•‘                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â•‘
â•‘                                     â”‚                              â•‘
â•‘                                     â–¼                              â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  5D Vector: [C, N, S, A, Î›]                                 â”‚  â•‘
â•‘  â”‚  + Pattern Detection (Trust Boundary, Secret, Test ë“±)      â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROCESSING (Preprocessing + Parameters)         [ì „ì²˜ë¦¬/ê°€ì¤‘ì¹˜]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  L2: ì •ê·œí™”                                                  â”‚  â”‚
â”‚  â”‚    - Simplex ì‚¬ì˜ (5D â†’ 3ì¶•)                                 â”‚  â”‚
â”‚  â”‚    - Anti-pattern Penalty (*args/kwargs: +3 each)            â”‚  â”‚
â”‚  â”‚    - ì œì™¸ í•­ëª© í•„í„° (self/cls, built-in)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                               â”‚
â”‚                                    â–¼                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  L3: íŒë‹¨ [LLM/Human ê°œì…]                                   â”‚  â”‚
â”‚  â”‚    - Essential Complexity Waiver                             â”‚  â”‚
â”‚  â”‚    - ëª¨ë“ˆ íƒ€ì… Context ì£¼ì…                                   â”‚  â”‚
â”‚  â”‚    - ë³¸ì§ˆì  vs ìš°ë°œì  ë³µì¡ë„ íŒë‹¨                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  OUTPUT (Inference)                                    [ì¶”ë¡ ]     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  3ì¶• ì ìˆ˜: [ğŸ Bread, ğŸ§€ Cheese, ğŸ¥“ Ham]                     â”‚  â•‘
â•‘  â”‚  Gate ê²°ê³¼ (PoC/MVP/Production)                              â”‚  â•‘
â•‘  â”‚  ë¦¬íŒ©í† ë§ ê¶Œì¥ì‚¬í•­ (-âˆ‡E)                                      â”‚  â•‘
â•‘  â”‚  Canonical í¸ì°¨ ë³´ê³                                          â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**í•µì‹¬ ì›ì¹™**: INPUTì€ context-free (ê²°ì •ì ), PROCESSINGì—ì„œ context ì£¼ì…, OUTPUTì€ context-aware.

### 2.2 í™•ì¥ ê°€ëŠ¥ ì•„í‚¤í…ì²˜ (ë¡œë“œë§µ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Future: Multi-Language Support                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   py    â”‚ â”‚   go    â”‚ â”‚  ts/js  â”‚ â”‚java/kt  â”‚ â”‚  c/c++  â”‚  â”‚
â”‚  â”‚ parser  â”‚ â”‚ parser  â”‚ â”‚ parser  â”‚ â”‚ parser  â”‚ â”‚ parser  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”˜       â”‚
â”‚                  â–¼           â–¼           â–¼           â–¼        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                  Unified 5D Vector                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Analysis Flow Layers                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ì •ë³´ íë¦„   â”‚ â”‚ ì¸í”„ë¼ íë¦„ â”‚ â”‚ë¹„ì¦ˆë‹ˆìŠ¤íë¦„ â”‚ â”‚ ë³´ì•ˆ íë¦„â”‚ â”‚
â”‚  â”‚  ë¶„ì„       â”‚ â”‚   ë¶„ì„      â”‚ â”‚   ë¶„ì„      â”‚ â”‚   ë¶„ì„   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                       Evaluation Levels                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  í•¨ìˆ˜   â”‚ â”‚ Class   â”‚ â”‚  ëª¨ë“ˆ   â”‚ â”‚ì•„í‚¤í…ì²˜ â”‚ â”‚ë¹„ì¦ˆë‹ˆìŠ¤  â”‚ â”‚
â”‚  â”‚  í‰ê°€   â”‚ â”‚  í‰ê°€   â”‚ â”‚  í‰ê°€   â”‚ â”‚  í‰ê°€   â”‚ â”‚ëª©ì ë‹¬ì„±ë¥ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 í˜„ì¬ êµ¬í˜„ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      semantic-complexity                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        Entry Points                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚   CLI   â”‚  â”‚   MCP   â”‚  â”‚   API   â”‚  â”‚  CI/CD  â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                           â”‚                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                    â”‚  Analyzer   â”‚                          â”‚
â”‚                    â”‚ Coordinator â”‚                          â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚       â–¼                  â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ ğŸ Bread â”‚       â”‚ğŸ§€ Cheeseâ”‚       â”‚ ğŸ¥“ Ham  â”‚           â”‚
â”‚  â”‚Security â”‚       â”‚Cognitiveâ”‚       â”‚Behavior â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                          â–¼                                  â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚                   â”‚  Simplex   â”‚                            â”‚
â”‚                   â”‚ Normalizer â”‚                            â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚       â–¼                  â–¼                  â–¼               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Gate   â”‚       â”‚ Budget  â”‚       â”‚Gradient â”‚           â”‚
â”‚  â”‚ Checker â”‚       â”‚ Tracker â”‚       â”‚Recommenderâ”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.4 ëª¨ë“ˆ êµ¬ì¡°

```
packages/core/src/
â”œâ”€â”€ types/                    # íƒ€ì… ì •ì˜
â”‚   â”œâ”€â”€ axis.ts              # Axis = 'ğŸ' | 'ğŸ§€' | 'ğŸ¥“'
â”‚   â”œâ”€â”€ module.ts            # ModuleType
â”‚   â”œâ”€â”€ score.ts             # SandwichScore
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ analyzers/               # 3ì¶• ë¶„ì„ê¸°
â”‚   â”œâ”€â”€ bread/               # ğŸ Security Analyzer
â”‚   â”‚   â”œâ”€â”€ trust-boundary.ts
â”‚   â”‚   â”œâ”€â”€ auth-flow.ts
â”‚   â”‚   â””â”€â”€ secret-detector.ts
â”‚   â”œâ”€â”€ cheese/              # ğŸ§€ Cognitive Analyzer
â”‚   â”‚   â”œâ”€â”€ cognitive.ts     # Cognitive Complexity (NOT McCabe!)
â”‚   â”‚   â”œâ”€â”€ nesting.ts       # Depth penalty
â”‚   â”‚   â”œâ”€â”€ hidden-coupling.ts
â”‚   â”‚   â””â”€â”€ state-async-retry.ts
â”‚   â”œâ”€â”€ ham/                 # ğŸ¥“ Behavioral Analyzer
â”‚   â”‚   â”œâ”€â”€ golden-test.ts
â”‚   â”‚   â”œâ”€â”€ contract-test.ts
â”‚   â”‚   â””â”€â”€ critical-path.ts
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ simplex/                 # Simplex ì •ê·œí™”
â”‚   â”œâ”€â”€ normalizer.ts        # 3ì¶• â†’ Simplex ë³€í™˜
â”‚   â”œâ”€â”€ labeler.ts           # ì§€ë°° ì¶• ë¼ë²¨ë§
â”‚   â”œâ”€â”€ equilibrium.ts       # ê· í˜•ì  íƒì§€
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ canonical/               # Canonical Profile
â”‚   â”œâ”€â”€ profiles.ts          # ëª¨ë“ˆ íƒ€ì…ë³„ í”„ë¡œíŒŒì¼
â”‚   â”œâ”€â”€ detector.ts          # ëª¨ë“ˆ íƒ€ì… ìë™ íƒì§€
â”‚   â”œâ”€â”€ deviation.ts         # í¸ì°¨ ê³„ì‚°
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ gate/                    # Gate System
â”‚   â”œâ”€â”€ mvp-gate.ts          # MVP ì§„ì… ì¡°ê±´
â”‚   â”œâ”€â”€ pr-gate.ts           # PR ì¡°ê±´
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ budget/                  # Change Budget
â”‚   â”œâ”€â”€ tracker.ts           # ì˜ˆì‚° ì¶”ì 
â”‚   â”œâ”€â”€ delta.ts             # ë³€ê²½ëŸ‰ ê³„ì‚°
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ recommend/               # Gradient Recommender
â”‚   â”œâ”€â”€ gradient.ts          # ê· í˜• ë°©í–¥ ê³„ì‚°
â”‚   â”œâ”€â”€ actions.ts           # ë¦¬íŒ©í† ë§ ì•¡ì…˜ ì œì•ˆ
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ protected/               # Protected Zone
â”‚   â”œâ”€â”€ patterns.ts          # ë³´í˜¸ íŒ¨í„´ ì •ì˜
â”‚   â”œâ”€â”€ detector.ts          # ë³´í˜¸ ì˜ì—­ íƒì§€
â”‚   â””â”€â”€ index.ts
â”‚
â””â”€â”€ index.ts                 # Public API
```

---

## 3. ì•Œê³ ë¦¬ì¦˜ ì„¤ê³„

### 3.1 ğŸ§€ Cheese: ì¸ì§€ ê°€ëŠ¥ ì—¬ë¶€ íŒì •

#### 3.1.1 ì •ì˜

```
ğŸ§€ Cheese = ì‚¬ëŒê³¼ LLMì´ ì¸ì§€í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ ë‚´ì— ìˆëŠ”ê°€?

ì¸ì§€ ê°€ëŠ¥ ì¡°ê±´ (ëª¨ë‘ ì¶©ì¡±í•´ì•¼ í•¨):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¡°ê±´              â”‚ ê¸°ì¤€              â”‚ ê·¼ê±°                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ì¤‘ì²© ê¹Šì´       â”‚ â‰¤ N (ì„¤ì • ê°€ëŠ¥)   â”‚ í•œëˆˆì— êµ¬ì¡° íŒŒì•…    â”‚
â”‚ 2. ê°œë… ìˆ˜         â”‚ â‰¤ 9ê°œ/í•¨ìˆ˜        â”‚ Miller's Law (7Â±2) â”‚
â”‚ 3. ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±    â”‚ ìµœì†Œí™”            â”‚ ì»¨í…ìŠ¤íŠ¸ ì™„ê²°ì„±     â”‚
â”‚ 4. stateÃ—asyncÃ—retry â”‚ 2ê°œ ì´ìƒ ê³µì¡´ ê¸ˆì§€ â”‚ ë™ì‹œ ì¶”ë¡  ë¶ˆê°€    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ê°œë… ìˆ˜ ê³„ì‚° ì‹œ ì œì™¸ í•­ëª©:
- self/cls íŒŒë¼ë¯¸í„°: í´ë˜ìŠ¤ ë©”ì„œë“œ ê·œì•½ìœ¼ë¡œ ì¸ì§€ ë¶€í•˜ ì—†ìŒ
- Built-in í•¨ìˆ˜: str, int, len, list, dict ë“±
- numpy ê¸°ë³¸ í•¨ìˆ˜: array, asanyarray, zeros ë“±
```

#### 3.1.2 ì˜ì‚¬ì½”ë“œ: ì¸ì§€ ê°€ëŠ¥ ì—¬ë¶€ íŒì •

```
FUNCTION is_cognitively_accessible(code, config) -> (Boolean, String):
    """
    ì½”ë“œê°€ ì‚¬ëŒ/LLMì´ ì¸ì§€ ê°€ëŠ¥í•œ ë²”ìœ„ ë‚´ì¸ì§€ íŒì •

    Input:
        code: ë¶„ì„ ëŒ€ìƒ ì†ŒìŠ¤ ì½”ë“œ
        config: ì„ê³„ê°’ ì„¤ì • (NESTING_THRESHOLD, HIDDEN_DEP_THRESHOLD)

    Output:
        (True, "ì¸ì§€ ê°€ëŠ¥")     - ğŸ§€ ì–‘í˜¸
        (False, ìœ„ë°˜ ì‚¬ìœ )      - ğŸ§€ ìœ„ë°˜
    """

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ì¡°ê±´ 1: ì¤‘ì²© ê¹Šì´ ê²€ì‚¬
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    max_nesting = calculate_max_nesting(code)
    IF max_nesting > config.NESTING_THRESHOLD:
        RETURN (False, "ì¤‘ì²© ê¹Šì´ ì´ˆê³¼: " + max_nesting)

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ì¡°ê±´ 2: í•¨ìˆ˜ë‹¹ ê°œë… ìˆ˜ ê²€ì‚¬ (Miller's Law: 7Â±2)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    FOR each function IN extract_functions(code):
        concept_count = count_concepts(function)  # self/cls, built-in ì œì™¸
        IF concept_count > 9:
            RETURN (False, "ê°œë… ìˆ˜ ì´ˆê³¼: " + function.name + " = " + concept_count)

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ì¡°ê±´ 3: ìˆ¨ê²¨ì§„ ì˜ì¡´ì„± ê²€ì‚¬
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    hidden_deps = detect_hidden_dependencies(code)
    IF hidden_deps.count > config.HIDDEN_DEP_THRESHOLD:
        RETURN (False, "ìˆ¨ê²¨ì§„ ì˜ì¡´ì„± ì´ˆê³¼: " + hidden_deps.list)

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # ì¡°ê±´ 4: stateÃ—asyncÃ—retry ê³µì¡´ ê²€ì‚¬
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    invariant = check_state_async_retry(code)
    IF invariant.violated:
        RETURN (False, "stateÃ—asyncÃ—retry ê³µì¡´: " + invariant.details)

    RETURN (True, "ì¸ì§€ ê°€ëŠ¥")
```

#### 3.1.3 ì˜ì‚¬ì½”ë“œ: ì¤‘ì²© ê¹Šì´ ê³„ì‚°

```
FUNCTION calculate_max_nesting(code) -> Integer:
    """
    ì½”ë“œì˜ ìµœëŒ€ ì¤‘ì²© ê¹Šì´ ê³„ì‚°
    """

    NESTING_STRUCTURES = {
        'if', 'elif', 'else',
        'for', 'while',
        'try', 'except',
        'with',
        'match',
        'lambda',
        'list_comprehension',
        'dict_comprehension',
        'set_comprehension'
    }

    max_depth = 0
    current_depth = 0

    FUNCTION traverse(node):
        nonlocal max_depth, current_depth

        IF node.type IN NESTING_STRUCTURES:
            current_depth += 1
            max_depth = MAX(max_depth, current_depth)

        FOR child IN node.children:
            traverse(child)

        IF node.type IN NESTING_STRUCTURES:
            current_depth -= 1

    traverse(parse_ast(code))
    RETURN max_depth
```

#### 3.1.4 ì˜ì‚¬ì½”ë“œ: ê°œë… ìˆ˜ ê³„ì‚°

```
FUNCTION count_concepts(function) -> Integer:
    """
    í•¨ìˆ˜ ë‚´ ê°œë… ìˆ˜ ê³„ì‚°

    ê°œë… = í•¨ìˆ˜ê°€ ë‹¤ë£¨ëŠ” ë…ë¦½ì ì¸ ê´€ì‹¬ì‚¬
    """

    concepts = SET()
    local_names = get_local_names(function)  # íŒŒë¼ë¯¸í„° + ë¡œì»¬ ë³€ìˆ˜

    FOR each node IN traverse_ast(function.body):

        # ì™¸ë¶€ í•¨ìˆ˜/ë©”ì„œë“œ í˜¸ì¶œ
        IF is_call(node):
            callee = get_callee_name(node)
            IF callee NOT IN local_names:
                concepts.ADD(callee)

        # ì™¸ë¶€ ì´ë¦„ ì ‘ê·¼
        IF is_name(node):
            IF node.name NOT IN local_names:
                concepts.ADD(node.name)

        # ìƒíƒœ ë³€ì´
        IF is_state_mutation(node):
            concepts.ADD("state:" + get_target(node))

    RETURN SIZE(concepts)
```

#### 3.1.5 ì˜ì‚¬ì½”ë“œ: ìˆ¨ê²¨ì§„ ì˜ì¡´ì„± íƒì§€

```
FUNCTION detect_hidden_dependencies(code) -> HiddenDepResult:
    """
    ì»¨í…ìŠ¤íŠ¸ ë°–ì—ì„œ ì˜¤ëŠ” ìˆ¨ê²¨ì§„ ì˜ì¡´ì„± íƒì§€
    """

    deps = []

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 1. ì „ì—­ ë³€ìˆ˜ ì ‘ê·¼
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    GLOBAL_PATTERNS = ['global X', 'nonlocal X']
    FOR match IN find_patterns(code, GLOBAL_PATTERNS):
        deps.APPEND(HiddenDep(type="global", location=match))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 2. í™˜ê²½ ë³€ìˆ˜ ì ‘ê·¼
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ENV_PATTERNS = ['os.environ', 'getenv(', 'os.getenv']
    FOR match IN find_patterns(code, ENV_PATTERNS):
        deps.APPEND(HiddenDep(type="env", location=match))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 3. ì•”ë¬µì  I/O
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    IO_PATTERNS = ['open(', 'requests.', 'urllib', 'socket.']
    FOR match IN find_patterns(code, IO_PATTERNS):
        deps.APPEND(HiddenDep(type="io", location=match))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 4. í´ë¡œì € ìº¡ì²˜
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    FOR each inner_function IN find_inner_functions(code):
        captured = find_captured_variables(inner_function)
        FOR var IN captured:
            deps.APPEND(HiddenDep(type="closure", location=var))

    RETURN HiddenDepResult(count=SIZE(deps), list=deps)
```

#### 3.1.6 ì˜ì‚¬ì½”ë“œ: stateÃ—asyncÃ—retry ë¶ˆë³€ì¡°ê±´

```
STRUCT InvariantResult:
    has_state: Boolean
    has_async: Boolean
    has_retry: Boolean
    violated: Boolean
    details: String


FUNCTION check_state_async_retry(code) -> InvariantResult:
    """
    stateÃ—asyncÃ—retry ë¶ˆë³€ì¡°ê±´ ê²€ì‚¬

    ê·œì¹™: 3ê°œ ì¤‘ 2ê°œ ì´ìƒ ê³µì¡´ ì‹œ ìœ„ë°˜
    ê·¼ê±°: ë™ì‹œì— ì¶”ë¡ í•  ìˆ˜ ì—†ëŠ” ë³µì¡ë„
    """

    has_state = detect_state_mutation(code)
    has_async = detect_async_pattern(code)
    has_retry = detect_retry_pattern(code)

    count = 0
    IF has_state: count += 1
    IF has_async: count += 1
    IF has_retry: count += 1

    violated = count >= 2

    details = []
    IF has_state: details.APPEND("state")
    IF has_async: details.APPEND("async")
    IF has_retry: details.APPEND("retry")

    RETURN InvariantResult(
        has_state = has_state,
        has_async = has_async,
        has_retry = has_retry,
        violated = violated,
        details = JOIN(details, " Ã— ")
    )


FUNCTION detect_state_mutation(code) -> Boolean:
    """ìƒíƒœ ë³€ì´ íŒ¨í„´ íƒì§€"""
    STATE_PATTERNS = [
        'self.X = ',           # ì¸ìŠ¤í„´ìŠ¤ ìƒíƒœ
        'global X',            # ì „ì—­ ìƒíƒœ
        '.append(', '.update(', '.extend(',  # ì»¬ë ‰ì…˜ ë³€ì´
        '[X] = '               # ì¸ë±ìŠ¤ í• ë‹¹
    ]
    RETURN matches_any(code, STATE_PATTERNS)


FUNCTION detect_async_pattern(code) -> Boolean:
    """ë¹„ë™ê¸° íŒ¨í„´ íƒì§€"""
    ASYNC_PATTERNS = [
        'async def',
        'await ',
        'asyncio.',
        'ThreadPoolExecutor',
        'ProcessPoolExecutor'
    ]
    RETURN matches_any(code, ASYNC_PATTERNS)


FUNCTION detect_retry_pattern(code) -> Boolean:
    """ì¬ì‹œë„ íŒ¨í„´ íƒì§€"""
    RETRY_PATTERNS = [
        'retry', 'backoff', 'attempt', 'max_retries',
        'for X in range(N)'   # ì¬ì‹œë„ ë£¨í”„ íŒ¨í„´
    ]
    RETURN matches_any(code, RETRY_PATTERNS)
```

#### 3.1.7 ì˜ˆì‹œ

```python
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì˜ˆì‹œ 1: ì¸ì§€ ê°€ëŠ¥ âœ“
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
def simple_function(x):
    if x > 0:
        return process(x)
    return default()

# ë¶„ì„:
#   ì¤‘ì²©: 1 âœ“
#   ê°œë… ìˆ˜: 2 (process, default) âœ“
#   ìˆ¨ê²¨ì§„ ì˜ì¡´ì„±: 0 âœ“
#   stateÃ—asyncÃ—retry: 0 âœ“
# ê²°ê³¼: ì¸ì§€ ê°€ëŠ¥


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì˜ˆì‹œ 2: ì¸ì§€ ë¶ˆê°€ âœ— - ì¤‘ì²© ì´ˆê³¼
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
def deeply_nested(a, b, c, d):
    if a:
        if b:
            if c:
                if d:
                    return result

# ë¶„ì„:
#   ì¤‘ì²©: 4 (threshold=3 ê°€ì •)
# ê²°ê³¼: ì¸ì§€ ë¶ˆê°€ - "ì¤‘ì²© ê¹Šì´ ì´ˆê³¼: 4"


# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# ì˜ˆì‹œ 3: ì¸ì§€ ë¶ˆê°€ âœ— - stateÃ—asyncÃ—retry ê³µì¡´
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async def fetch_with_retry(self):
    for attempt in range(3):           # retry âœ“
        try:
            self.result = await fetch() # state âœ“ + async âœ“
            return self.result
        except:
            await sleep(1)

# ë¶„ì„:
#   state: self.result = ...
#   async: async def, await
#   retry: for attempt in range(3)
#   ê³µì¡´ ìˆ˜: 3
# ê²°ê³¼: ì¸ì§€ ë¶ˆê°€ - "stateÃ—asyncÃ—retry ê³µì¡´: state Ã— async Ã— retry"
```

### 3.2 stateÃ—asyncÃ—retry ë¶ˆë³€ì¡°ê±´ (ìƒì„¸)

#### 3.2.2 íƒì§€ íŒ¨í„´

```typescript
// ìƒíƒœ (State) íƒì§€
const STATE_PATTERNS = {
  typescript: [
    /\bthis\.\w+\s*=/,           // this.field =
    /\blet\s+\w+\s*=/,           // let ë³€ìˆ˜
    /\.setState\(/,              // React setState
    /\bstore\./,                 // Redux/MobX store
  ],
  python: [
    /\bself\.\w+\s*=/,           // self.field =
    /\bglobal\s+\w+/,            // global ë³€ìˆ˜
  ],
  go: [
    /\b\w+\s*=\s*[^=]/,          // ë³€ìˆ˜ ì¬í• ë‹¹
    /\batomic\./,                // atomic ì—°ì‚°
  ]
};

// ë¹„ë™ê¸° (Async) íƒì§€
const ASYNC_PATTERNS = {
  typescript: [
    /\basync\s+function/,
    /\bawait\s+/,
    /\.then\(/,
    /new\s+Promise\(/,
  ],
  python: [
    /\basync\s+def/,
    /\bawait\s+/,
    /asyncio\./,
  ],
  go: [
    /\bgo\s+func/,
    /\bgo\s+\w+\(/,
    /<-\s*\w+/,                  // channel receive
    /\w+\s*<-/,                  // channel send
  ]
};

// ì¬ì‹œë„ (Retry) íƒì§€
const RETRY_PATTERNS = {
  all: [
    /retry/i,
    /backoff/i,
    /attempt/i,
    /max_retries/i,
    /for\s*\(.*;\s*\w+\s*<\s*\d+/,  // for loop with counter
  ]
};
```

#### 3.2.3 ì•Œê³ ë¦¬ì¦˜

```typescript
function checkCognitiveInvariant(code: string, lang: Language): CognitiveInvariant {
  const hasState = matchesAny(code, STATE_PATTERNS[lang]);
  const hasAsync = matchesAny(code, ASYNC_PATTERNS[lang]);
  const hasRetry = matchesAny(code, RETRY_PATTERNS.all);

  // 3ê°œ ì¤‘ 2ê°œ ì´ìƒì´ë©´ ìœ„ë°˜
  const count = [hasState, hasAsync, hasRetry].filter(Boolean).length;
  const violated = count >= 2;

  return { hasState, hasAsync, hasRetry, violated };
}
```

### 3.3 ğŸ Bread: ë³´ì•ˆ ì‹ ë¢° ê²½ê³„

#### 3.3.1 ì •ì˜

```
ğŸ Bread = ë³´ì•ˆ ì‹ ë¢° ê²½ê³„ê°€ ëª…í™•íˆ ì •ì˜ë˜ì–´ ìˆëŠ”ê°€?

ë¶„ì„ ëŒ€ìƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìš”ì†Œ              â”‚ íƒì§€ ë°©ë²•              â”‚ ì‹¬ê°ë„          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Trust Boundary    â”‚ ë°ì½”ë ˆì´í„°, ë§ˆì»¤       â”‚ í•„ìˆ˜            â”‚
â”‚ Auth Explicitness â”‚ AUTH_FLOW ì„ ì–¸         â”‚ í•„ìˆ˜            â”‚
â”‚ Secret Pattern    â”‚ í•˜ë“œì½”ë”© ê²€ì‚¬          â”‚ high/medium/low â”‚
â”‚ Secret Leak       â”‚ print/logger ì¶œë ¥      â”‚ high            â”‚
â”‚ Blast Radius      â”‚ import/LOC ë¶„ì„        â”‚ ì°¸ê³ ìš©          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.3.2 ì˜ì‚¬ì½”ë“œ: Trust Boundary íƒì§€

```
FUNCTION detect_trust_boundaries(code) -> List[TrustBoundary]:
    """
    Trust boundary íƒì§€
    """

    boundaries = []

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 1. API ì—”ë“œí¬ì¸íŠ¸ íƒì§€
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    API_PATTERNS = [
        '@app.get', '@app.post', '@app.put', '@app.delete',  # FastAPI
        '@api_view', '@router.',                              # Django
        '@blueprint.route',                                   # Flask
        'func.*Handler',                                      # Go
    ]
    FOR match IN find_patterns(code, API_PATTERNS):
        boundaries.APPEND(TrustBoundary(type="api", location=match))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 2. ì¸ì¦ ê²½ê³„ íƒì§€
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    AUTH_BOUNDARY_PATTERNS = [
        '@login_required', '@auth_required',
        '@permission_required', '@requires_auth',
        'Depends(get_current_user)',
    ]
    FOR match IN find_patterns(code, AUTH_BOUNDARY_PATTERNS):
        boundaries.APPEND(TrustBoundary(type="auth", location=match))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 3. ëª…ì‹œì  ë§ˆì»¤ íƒì§€
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    MARKER_PATTERNS = [
        '# TRUST_BOUNDARY:', '// TRUST_BOUNDARY:',
        '# SECURITY_BOUNDARY:', '// SECURITY_BOUNDARY:',
    ]
    FOR match IN find_patterns(code, MARKER_PATTERNS):
        boundaries.APPEND(TrustBoundary(type="marker", location=match))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 4. ë°ì´í„° ê²€ì¦ ê²½ê³„ íƒì§€
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    DATA_BOUNDARY_PATTERNS = [
        '@validate', '@validator', 'sanitize(',
        'BaseModel', 'Validator', 'Schema',
    ]
    FOR match IN find_patterns(code, DATA_BOUNDARY_PATTERNS):
        boundaries.APPEND(TrustBoundary(type="data", location=match))

    RETURN boundaries
```

#### 3.3.3 ì˜ì‚¬ì½”ë“œ: Secret íƒì§€

```
FUNCTION detect_secrets(code) -> List[SecretPattern]:
    """
    í•˜ë“œì½”ë”©ëœ ì‹œí¬ë¦¿ ë° ì‹œí¬ë¦¿ ëˆ„ì¶œ íƒì§€
    """

    secrets = []

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 1. í•˜ë“œì½”ë”©ëœ ì‹œí¬ë¦¿
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    SECRET_PATTERNS = {
        'password': (r'password\s*=\s*["\'][^"\']+["\']', 'high'),
        'api_key': (r'api_key\s*=\s*["\'][^"\']+["\']', 'high'),
        'secret': (r'secret\s*=\s*["\'][^"\']+["\']', 'high'),
        'token': (r'token\s*=\s*["\'][^"\']+["\']', 'medium'),
        'private_key': (r'-----BEGIN.*PRIVATE KEY-----', 'high'),
    }
    FOR name, (pattern, severity) IN SECRET_PATTERNS.items():
        FOR match IN find_regex(code, pattern):
            secrets.APPEND(SecretPattern(type=name, severity=severity, location=match))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 2. ì‹œí¬ë¦¿ ëˆ„ì¶œ (print/logger)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    LEAK_PATTERNS = [
        r'print\(.*password',
        r'print\(.*token',
        r'print\(.*secret',
        r'logger\.\w+\(.*password',
        r'logger\.\w+\(.*token',
        r'logging\.\w+\(.*api_key',
    ]
    FOR pattern IN LEAK_PATTERNS:
        FOR match IN find_regex(code, pattern):
            secrets.APPEND(SecretPattern(type="password_leak", severity="high", location=match))

    RETURN secrets
```

#### 3.3.4 ì˜ì‚¬ì½”ë“œ: Auth ëª…ì‹œì„± ê³„ì‚°

```
FUNCTION calculate_auth_explicitness(code) -> (Float, List[String]):
    """
    Auth ëª…ì‹œì„± ì ìˆ˜ (0.0 ~ 1.0) ë° íŒ¨í„´ ëª©ë¡ ë°˜í™˜
    """

    score = 0.0
    patterns = []

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 1. AUTH_FLOW ëª…ì‹œì  ì„ ì–¸ (+0.3)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    IF contains(code, 'AUTH_FLOW'):
        score += 0.3
        patterns.APPEND("explicit AUTH_FLOW variable")

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 2. Auth í´ë˜ìŠ¤/í•¨ìˆ˜ ì¡´ì¬ (+0.2)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    AUTH_CLASS_PATTERNS = [
        r'class\s+\w*Auth\w*',
        r'class\s+\w*Authentication\w*',
        r'def\s+authenticate',
        r'def\s+verify_token',
    ]
    FOR pattern IN AUTH_CLASS_PATTERNS:
        IF find_regex(code, pattern):
            score += 0.2
            patterns.APPEND("Auth class/function")
            BREAK

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 3. JWT/OAuth ì‚¬ìš© (+0.2)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    IF contains(code, 'jwt.') OR contains(code, 'import jwt'):
        score += 0.2
        patterns.APPEND("JWT usage")

    IF contains(code, 'oauth') OR contains(code, 'OAuth'):
        score += 0.2
        patterns.APPEND("OAuth usage")

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 4. í† í° ê²€ì¦ (+0.1)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    TOKEN_PATTERNS = ['verify_token', 'validate_token', 'decode_token']
    FOR pattern IN TOKEN_PATTERNS:
        IF contains(code, pattern):
            score += 0.1
            patterns.APPEND("token verification")
            BREAK

    RETURN (MIN(score, 1.0), patterns)
```

### 3.4 ğŸ¥“ Ham: í–‰ë™ ë³´í˜¸ ì»¤ë²„ë¦¬ì§€

#### 3.4.1 ì •ì˜

```
ğŸ¥“ Ham = Critical pathê°€ Golden testë¡œ ë³´í˜¸ë˜ê³  ìˆëŠ”ê°€?

ë¶„ì„ ëŒ€ìƒ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ìš”ì†Œ              â”‚ ì„¤ëª…                   â”‚ ë³´í˜¸ ê¸°ì¤€       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Critical Path     â”‚ payment, auth, dataë“±  â”‚ 100% ë³´í˜¸ ê¶Œì¥  â”‚
â”‚ Golden Test       â”‚ ì˜ˆìƒ ê²°ê³¼ assertion    â”‚ PoC: 60%+       â”‚
â”‚ Contract Test     â”‚ API ê³„ì•½ ê²€ì¦          â”‚ external API ì‹œ â”‚
â”‚ Test Discovery    â”‚ ìë™ í…ŒìŠ¤íŠ¸ íŒŒì¼ íƒìƒ‰  â”‚ test_*.py ë“±    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.4.2 ì˜ì‚¬ì½”ë“œ: Critical Path íƒì§€

```
FUNCTION detect_critical_paths(code) -> List[CriticalPath]:
    """
    Critical path íƒì§€ - ë°˜ë“œì‹œ í…ŒìŠ¤íŠ¸ë¡œ ë³´í˜¸í•´ì•¼ í•˜ëŠ” ê²½ë¡œ
    """

    paths = []

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 1. ê²°ì œ ì²˜ë¦¬ (payment)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    PAYMENT_PATTERNS = [
        'process_payment', 'charge', 'refund',
        'stripe.', 'paypal.', 'braintree.',
        'payment', 'billing', 'invoice',
    ]
    FOR func IN extract_functions(code):
        IF matches_any(func.name + func.body, PAYMENT_PATTERNS):
            paths.APPEND(CriticalPath(type="payment", function=func.name))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 2. ì¸ì¦/ì¸ê°€ (auth)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    AUTH_PATTERNS = [
        'login', 'logout', 'authenticate',
        'register', 'signup', 'create_user',
        'verify_password', 'check_permission',
    ]
    FOR func IN extract_functions(code):
        IF matches_any(func.name, AUTH_PATTERNS):
            paths.APPEND(CriticalPath(type="auth", function=func.name))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 3. ë°ì´í„° ë³€ì´ (data_mutation)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    DATA_MUTATION_PATTERNS = [
        '.save()', '.commit()', '.delete()',
        'db.session.add', 'create_', 'update_', 'delete_',
        'INSERT', 'UPDATE', 'DELETE',
    ]
    FOR func IN extract_functions(code):
        IF matches_any(func.body, DATA_MUTATION_PATTERNS):
            paths.APPEND(CriticalPath(type="data_mutation", function=func.name))

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # 4. ì™¸ë¶€ API í˜¸ì¶œ (external_api)
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    EXTERNAL_API_PATTERNS = [
        'requests.get', 'requests.post',
        'httpx.', 'aiohttp.',
        'fetch(', 'axios.',
    ]
    FOR func IN extract_functions(code):
        IF matches_any(func.body, EXTERNAL_API_PATTERNS):
            paths.APPEND(CriticalPath(type="external_api", function=func.name))

    RETURN paths
```

#### 3.4.3 ì˜ì‚¬ì½”ë“œ: Test Discovery

```
FUNCTION discover_tests(file_path: String, test_dir: String = None) -> Dict[String, String]:
    """
    ì†ŒìŠ¤ íŒŒì¼ì— ëŒ€ì‘í•˜ëŠ” í…ŒìŠ¤íŠ¸ íŒŒì¼ ìë™ íƒìƒ‰

    ê·œì¹™:
    - src/module.py â†’ tests/test_module.py
    - src/module.py â†’ src/module_test.py
    - src/module.py â†’ test/module_test.py
    """

    base_name = get_basename_without_ext(file_path)
    dir_path = get_directory(file_path)

    test_patterns = [
        f"test_{base_name}.py",
        f"{base_name}_test.py",
        f"tests/test_{base_name}.py",
        f"test/test_{base_name}.py",
    ]

    # í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê¸°ì¤€ íƒìƒ‰
    project_root = find_project_root(file_path)

    test_sources = {}
    FOR pattern IN test_patterns:
        full_path = join_path(project_root, pattern)
        IF file_exists(full_path):
            test_sources[full_path] = read_file(full_path)

    # test_dir ì§€ì •ëœ ê²½ìš° í•´ë‹¹ ë””ë ‰í† ë¦¬ë„ íƒìƒ‰
    IF test_dir:
        FOR file IN glob(test_dir, "test_*.py"):
            test_sources[file] = read_file(file)

    RETURN test_sources
```

#### 3.4.4 ì˜ì‚¬ì½”ë“œ: Golden Test íƒì§€

```
FUNCTION detect_golden_tests(test_sources: Dict[String, String]) -> List[GoldenTest]:
    """
    Golden test íƒì§€ - ì˜ˆìƒ ê²°ê³¼ë¥¼ assertionìœ¼ë¡œ ê²€ì¦í•˜ëŠ” í…ŒìŠ¤íŠ¸
    """

    golden_tests = []

    GOLDEN_PATTERNS = [
        '@pytest.mark.golden',           # ëª…ì‹œì  golden marker
        'snapshot',                       # snapshot testing
        'assert.*==.*expected',          # expected ê°’ ë¹„êµ
        'assertEqual.*expected',         # unittest expected
        'toEqual(expected)',             # Jest expected
    ]

    FOR file_path, source IN test_sources.items():
        FOR func IN extract_test_functions(source):
            IF matches_any(func.body, GOLDEN_PATTERNS):
                golden_tests.APPEND(GoldenTest(
                    file=file_path,
                    function=func.name,
                    pattern=matched_pattern
                ))

    RETURN golden_tests
```

#### 3.4.5 ì˜ì‚¬ì½”ë“œ: Coverage ê³„ì‚°

```
FUNCTION calculate_ham_coverage(
    critical_paths: List[CriticalPath],
    test_sources: Dict[String, String]
) -> Float:
    """
    Critical path ë³´í˜¸ ì»¤ë²„ë¦¬ì§€ ê³„ì‚°

    Returns:
        0.0 ~ 1.0 (ë³´í˜¸ëœ critical path ë¹„ìœ¨)
    """

    IF len(critical_paths) == 0:
        RETURN 1.0  # Critical path ì—†ìœ¼ë©´ 100%

    protected_count = 0

    FOR path IN critical_paths:
        # í…ŒìŠ¤íŠ¸ íŒŒì¼ì—ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ”ì§€ í™•ì¸
        FOR file_path, source IN test_sources.items():
            IF contains(source, path.function):
                path.protected = True
                protected_count += 1
                BREAK

    RETURN protected_count / len(critical_paths)
```

### 3.5 Simplex ì •ê·œí™”

#### 3.5.1 Raw Score â†’ Simplex ë³€í™˜

```typescript
interface RawScores {
  bread: number;    // 0 ~ âˆ (ë³´ì•ˆ ì ìˆ˜)
  cheese: number;   // 0 ~ âˆ (ì¸ì§€ ì ìˆ˜)
  ham: number;      // 0 ~ âˆ (í–‰ë™ ì ìˆ˜)
}

interface SandwichScore {
  bread: number;    // 0 ~ 100
  cheese: number;   // 0 ~ 100
  ham: number;      // 0 ~ 100
  // bread + cheese + ham = 100
}

function normalizeToSimplex(raw: RawScores): SandwichScore {
  const total = raw.bread + raw.cheese + raw.ham;

  if (total === 0) {
    // ê¸°ë³¸ê°’: ê· ë“± ë¶„ë°°
    return { bread: 33.33, cheese: 33.33, ham: 33.34 };
  }

  return {
    bread: (raw.bread / total) * 100,
    cheese: (raw.cheese / total) * 100,
    ham: (raw.ham / total) * 100,
  };
}
```

#### 3.5.2 ì§€ë°° ì¶• ë¼ë²¨ë§

```typescript
type DominantLabel = 'ğŸ' | 'ğŸ§€' | 'ğŸ¥“';

function labelDominantAxis(score: SandwichScore): DominantLabel {
  if (score.bread >= score.cheese && score.bread >= score.ham) {
    return 'ğŸ';
  }
  if (score.cheese >= score.bread && score.cheese >= score.ham) {
    return 'ğŸ§€';
  }
  return 'ğŸ¥“';
}
```

### 3.6 Canonical Profile í¸ì°¨ ê³„ì‚°

#### 3.6.1 ëª¨ë“ˆ íƒ€ì…ë³„ Canonical ì •ì˜

```typescript
const CANONICAL_PROFILES: Record<ModuleType, SandwichScore> = {
  'deploy':       { bread: 70, cheese: 10, ham: 20 },
  'api-external': { bread: 50, cheese: 20, ham: 30 },
  'api-internal': { bread: 30, cheese: 30, ham: 40 },
  'app':          { bread: 20, cheese: 50, ham: 30 },
  'lib-domain':   { bread: 10, cheese: 30, ham: 60 },
  'lib-infra':    { bread: 20, cheese: 30, ham: 50 },
};
```

#### 3.6.2 í¸ì°¨ ê³„ì‚°

```typescript
interface Deviation {
  bread: number;    // + ëŠ” ì´ˆê³¼, - ëŠ” ë¯¸ë‹¬
  cheese: number;
  ham: number;
  distance: number; // L2 ê±°ë¦¬
}

function calculateDeviation(
  current: SandwichScore,
  canonical: SandwichScore
): Deviation {
  const dB = current.bread - canonical.bread;
  const dC = current.cheese - canonical.cheese;
  const dH = current.ham - canonical.ham;

  return {
    bread: dB,
    cheese: dC,
    ham: dH,
    distance: Math.sqrt(dB*dB + dC*dC + dH*dH),
  };
}
```

### 3.7 Gradient ë°©í–¥ ê³„ì‚°

#### 3.7.1 Lyapunov ì—ë„ˆì§€ í•¨ìˆ˜

```typescript
// E(v) = ||v - c||Â² = (v - c)áµ€(v - c)
// ì—¬ê¸°ì„œ v = í˜„ì¬ ì , c = canonical centroid

function calculateEnergy(
  current: SandwichScore,
  canonical: SandwichScore
): number {
  const dB = current.bread - canonical.bread;
  const dC = current.cheese - canonical.cheese;
  const dH = current.ham - canonical.ham;

  return dB*dB + dC*dC + dH*dH;
}
```

#### 3.7.2 Gradient (ê°œì„  ë°©í–¥)

```typescript
interface GradientDirection {
  axis: 'ğŸ' | 'ğŸ§€' | 'ğŸ¥“';
  direction: 'increase' | 'decrease';
  magnitude: number;
}

function calculateGradient(
  current: SandwichScore,
  canonical: SandwichScore
): GradientDirection[] {
  const deviation = calculateDeviation(current, canonical);

  const gradients: GradientDirection[] = [];

  // ê°€ì¥ í° í¸ì°¨ë¶€í„° ê°œì„ 
  if (Math.abs(deviation.bread) > 0) {
    gradients.push({
      axis: 'ğŸ',
      direction: deviation.bread > 0 ? 'decrease' : 'increase',
      magnitude: Math.abs(deviation.bread),
    });
  }
  if (Math.abs(deviation.cheese) > 0) {
    gradients.push({
      axis: 'ğŸ§€',
      direction: deviation.cheese > 0 ? 'decrease' : 'increase',
      magnitude: Math.abs(deviation.cheese),
    });
  }
  if (Math.abs(deviation.ham) > 0) {
    gradients.push({
      axis: 'ğŸ¥“',
      direction: deviation.ham > 0 ? 'decrease' : 'increase',
      magnitude: Math.abs(deviation.ham),
    });
  }

  // í¬ê¸°ìˆœ ì •ë ¬
  return gradients.sort((a, b) => b.magnitude - a.magnitude);
}
```

### 3.8 3ë‹¨ê³„ Gate ì‹œìŠ¤í…œ

#### 3.8.1 ì •ì˜

```
Gate ì‹œìŠ¤í…œ = ì½”ë“œ í’ˆì§ˆ ì§„ì… ì¡°ê±´ (ë‹¨ê³„ë³„ ì ì§„ì  ì—„ê²©í™”)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë‹¨ê³„         â”‚ ğŸ Bread      â”‚ ğŸ§€ Cheese   â”‚ ğŸ¥“ Ham        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PoC          â”‚ SKIP          â”‚ WARN only   â”‚ coverageâ‰¥60% â”‚
â”‚ (ì‹¤í—˜ ë‹¨ê³„)  â”‚               â”‚             â”‚               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MVP          â”‚ boundaryì •ì˜  â”‚ accessible  â”‚ coverageâ‰¥80% â”‚
â”‚ (ì œí’ˆ ë‹¨ê³„)  â”‚ AUTH_FLOWëª…ì‹œ â”‚ no secrets  â”‚ contractì¡´ì¬  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Production   â”‚ MVP ì¡°ê±´      â”‚ MVP ì¡°ê±´    â”‚ coverageâ‰¥95% â”‚
â”‚ (ìš´ì˜ ë‹¨ê³„)  â”‚ + ê°ì‚¬ ë¡œê·¸   â”‚ + waiver í—ˆìš©â”‚ + 100% ê¶Œì¥  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3.8.2 ì˜ì‚¬ì½”ë“œ: Gate ê²€ì‚¬

```
FUNCTION check_gate(
    source: String,
    gate_type: "poc" | "mvp" | "production",
    file_path: String = None,
    test_dir: String = None
) -> GateResult:
    """
    Gate ì¡°ê±´ ê²€ì‚¬

    Args:
        source: ë¶„ì„ ëŒ€ìƒ ì†ŒìŠ¤ ì½”ë“œ
        gate_type: Gate ë‹¨ê³„
        file_path: íŒŒì¼ ê²½ë¡œ (test discoveryìš©)
        test_dir: í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬

    Returns:
        GateResult (passed, violations, summary)
    """

    # 1. 3ì¶• ë¶„ì„ ìˆ˜í–‰
    bread_result = analyze_bread(source, file_path)
    cheese_result = analyze_cheese(source)
    ham_result = analyze_ham(source, file_path, test_dir)

    violations = []

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # PoC Gate: ê°€ì¥ ëŠìŠ¨í•¨
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    IF gate_type == "poc":
        # ğŸ Bread: SKIP
        # ğŸ§€ Cheese: WARN only (violationsì— ì¶”ê°€í•˜ì§€ë§Œ ì‹¤íŒ¨ëŠ” ì•„ë‹˜)
        # ğŸ¥“ Ham: coverage >= 60%
        IF ham_result.golden_test_coverage < 0.60:
            violations.APPEND("Ham: Coverage < 60%")

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # MVP Gate: ì œí’ˆ ìˆ˜ì¤€
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ELSE IF gate_type == "mvp":
        # ğŸ Bread: trust boundary ì •ì˜, AUTH_FLOW ëª…ì‹œ
        IF bread_result.trust_boundary_count == 0:
            violations.APPEND("Bread: No trust boundary defined")
        IF bread_result.auth_explicitness < 0.3:
            violations.APPEND("Bread: Low auth explicitness")
        IF len([s for s in bread_result.secret_patterns if s.severity == "high"]) > 0:
            violations.APPEND("Bread: High severity secrets detected")

        # ğŸ§€ Cheese: accessible = True
        IF NOT cheese_result.accessible:
            violations.EXTEND(cheese_result.violations)

        # ğŸ¥“ Ham: coverage >= 80%, contract test ì¡´ì¬
        IF ham_result.golden_test_coverage < 0.80:
            violations.APPEND("Ham: Coverage < 80%")
        IF has_external_api(source) AND NOT ham_result.contract_test_exists:
            violations.APPEND("Ham: External API without contract test")

    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    # Production Gate: ê°€ì¥ ì—„ê²©
    # â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    ELSE IF gate_type == "production":
        # MVP ì¡°ê±´ ëª¨ë‘ ì ìš©
        mvp_result = check_gate(source, "mvp", file_path, test_dir)
        violations.EXTEND(mvp_result.violations)

        # ğŸ¥“ Ham: coverage >= 95%
        IF ham_result.golden_test_coverage < 0.95:
            violations.APPEND("Ham: Production requires coverage >= 95%")

        # Waiver í™•ì¸ (Productionë§Œ í—ˆìš©)
        # WaiverëŠ” ë³„ë„ check_waiver í•¨ìˆ˜ì—ì„œ ì²˜ë¦¬

    passed = len(violations) == 0

    RETURN GateResult(
        gate=gate_type,
        passed=passed,
        violations=violations,
        summary=generate_summary(bread_result, cheese_result, ham_result)
    )
```

### 3.9 Essential Complexity Waiver

#### 3.9.1 ì •ì˜

```
Essential Complexity Waiver = ë³¸ì§ˆì  ë³µì¡ë„ì— ëŒ€í•œ ì˜ˆì™¸ í—ˆìš©

ì ìš© ì¡°ê±´:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ì¡°ê±´                    â”‚ ì„¤ëª…                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Production ë‹¨ê³„ë§Œ       â”‚ PoC/MVPì—ì„œëŠ” waiver ë¶ˆí—ˆ         â”‚
â”‚ ADR ë¬¸ì„œ ì°¸ì¡° í•„ìˆ˜      â”‚ ì˜ì‚¬ê²°ì • ê¸°ë¡ ì¶”ì  ê°€ëŠ¥í•´ì•¼ í•¨     â”‚
â”‚ LLM/Human ê²€í†  í•„ìˆ˜     â”‚ ìë™ ìŠ¹ì¸ ë¶ˆê°€                    â”‚
â”‚ ë³¸ì§ˆì  ë³µì¡ë„ë§Œ         â”‚ ìš°ë°œì  ë³µì¡ë„ëŠ” ë¦¬íŒ©í† ë§ìœ¼ë¡œ ì œê±°  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ë³¸ì§ˆì  ë³µì¡ë„ ì˜ˆì‹œ:
- ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ (AES, RSA ë“±)
- ê·œì œ ì¤€ìˆ˜ ë¡œì§ (ì˜ë£Œ, ê¸ˆìœµ ë“±)
- ë ˆê±°ì‹œ ì‹œìŠ¤í…œ í†µí•© (ë³€ê²½ ë¶ˆê°€)
- ë„ë©”ì¸ ê³ ìœ  ë³µì¡ë„ (ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜ ë“±)
```

#### 3.9.2 ì˜ì‚¬ì½”ë“œ: Waiver ê²€ì‚¬

```
FUNCTION check_waiver(
    source: String,
    waiver_file: String = None
) -> WaiverResult:
    """
    Essential Complexity Waiver ê²€ì‚¬

    Args:
        source: ë¶„ì„ ëŒ€ìƒ ì†ŒìŠ¤ ì½”ë“œ
        waiver_file: .waiver.json íŒŒì¼ ê²½ë¡œ

    Returns:
        WaiverResult (has_waiver, valid, adr_ref, reason)
    """

    # 1. ì¸ë¼ì¸ waiver ë§ˆì»¤ íƒì§€
    WAIVER_PATTERNS = [
        r'# ESSENTIAL_COMPLEXITY_WAIVER:',
        r'// ESSENTIAL_COMPLEXITY_WAIVER:',
        r'@essential_complexity_waiver',
    ]

    inline_waivers = []
    FOR pattern IN WAIVER_PATTERNS:
        FOR match IN find_regex(source, pattern):
            # ADR ì°¸ì¡° ì¶”ì¶œ
            adr_ref = extract_adr_reference(match)
            inline_waivers.APPEND(InlineWaiver(
                location=match.location,
                adr_ref=adr_ref,
                reason=extract_reason(match)
            ))

    # 2. ì™¸ë¶€ waiver íŒŒì¼ í™•ì¸
    external_waivers = []
    IF waiver_file AND file_exists(waiver_file):
        waiver_data = parse_json(read_file(waiver_file))
        FOR entry IN waiver_data.get("waivers", []):
            external_waivers.APPEND(ExternalWaiver(
                pattern=entry["pattern"],
                adr=entry["adr"],
                justification=entry["justification"],
                approved_at=entry.get("approved_at"),
                expires_at=entry.get("expires_at"),
                approver=entry.get("approver")
            ))

    # 3. ìœ íš¨ì„± ê²€ì‚¬
    all_waivers = inline_waivers + external_waivers
    valid_waivers = []
    invalid_waivers = []

    FOR waiver IN all_waivers:
        IF waiver.adr IS None OR waiver.adr == "":
            invalid_waivers.APPEND((waiver, "Missing ADR reference"))
        ELSE IF is_expired(waiver):
            invalid_waivers.APPEND((waiver, "Waiver expired"))
        ELSE:
            valid_waivers.APPEND(waiver)

    RETURN WaiverResult(
        has_waiver=len(all_waivers) > 0,
        valid=len(invalid_waivers) == 0,
        valid_waivers=valid_waivers,
        invalid_waivers=invalid_waivers
    )
```

#### 3.9.3 Waiver íŒŒì¼ í˜•ì‹

```json
{
  "$schema": "https://semantic-complexity.dev/schemas/waiver.json",
  "version": "1.0",
  "waivers": [
    {
      "pattern": "src/crypto/*.py",
      "adr": "ADR-007",
      "justification": "AES-256 ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ - ë³¸ì§ˆì  ë³µì¡ë„",
      "approved_at": "2025-01-15",
      "expires_at": "2025-12-31",
      "approver": "security-team"
    },
    {
      "pattern": "src/regulations/hipaa.py",
      "adr": "ADR-012",
      "justification": "HIPAA ê·œì œ ì¤€ìˆ˜ ë¡œì§ - ë²•ì  ìš”êµ¬ì‚¬í•­",
      "approved_at": "2025-01-01",
      "expires_at": null,
      "approver": "compliance-team"
    }
  ]
}
```

---

## 4. ë°ì´í„° êµ¬ì¡°

### 4.1 í•µì‹¬ íƒ€ì…

```typescript
// ì¶• íƒ€ì…
type Axis = 'ğŸ' | 'ğŸ§€' | 'ğŸ¥“';

// ëª¨ë“ˆ íƒ€ì…
type ModuleType =
  | 'deploy'
  | 'api-external'
  | 'api-internal'
  | 'app'
  | 'lib-domain'
  | 'lib-infra';

// Simplex ìƒì˜ ì 
interface SandwichScore {
  bread: number;
  cheese: number;
  ham: number;
}

// ë¶„ì„ ê²°ê³¼
interface ModuleAnalysis {
  path: string;
  moduleType: ModuleType;

  // Raw scores (ì •ê·œí™” ì „)
  raw: {
    bread: RawBreadScore;
    cheese: RawCheeseScore;
    ham: RawHamScore;
  };

  // Simplex ì ìˆ˜
  current: SandwichScore;
  canonical: SandwichScore;
  deviation: Deviation;

  // ë¼ë²¨ë§
  label: Axis;
  inEquilibrium: boolean;

  // ìœ„ë°˜ì‚¬í•­
  violations: Violation[];

  // ê¶Œì¥ì‚¬í•­
  recommendations: Recommendation[];
}
```

### 4.2 Gate ê²°ê³¼ íƒ€ì…

```typescript
interface GateResult {
  gate: 'mvp' | 'production';
  passed: boolean;
  sandwichFormed: boolean;

  bread: {
    passed: boolean;
    trustBoundaryDefined: boolean;
    authFlowFixed: boolean;
    violations: string[];
  };

  cheese: {
    passed: boolean;
    maxCognitive: number;
    threshold: number;
    stateAsyncRetryViolations: string[];
  };

  ham: {
    passed: boolean;
    goldenTestCoverage: number;
    contractTestExists: boolean;
    criticalPathsProtected: string[];
    unprotectedPaths: string[];
  };
}
```

### 4.3 Change Budget íƒ€ì…

```typescript
interface ChangeBudget {
  deltaCognitive: number;
  deltaStateTransitions: number;
  deltaPublicApi: number;
  breakingChangesAllowed: boolean;
}

interface BudgetCheckResult {
  passed: boolean;
  violations: {
    dimension: string;
    allowed: number;
    actual: number;
  }[];
}

const CHANGE_BUDGETS: Record<ModuleType, ChangeBudget> = {
  'deploy':       { deltaCognitive: 2,  deltaStateTransitions: 0, deltaPublicApi: 0, breakingChangesAllowed: false },
  'api-external': { deltaCognitive: 3,  deltaStateTransitions: 1, deltaPublicApi: 2, breakingChangesAllowed: false },
  'api-internal': { deltaCognitive: 5,  deltaStateTransitions: 2, deltaPublicApi: 3, breakingChangesAllowed: true },
  'app':          { deltaCognitive: 8,  deltaStateTransitions: 3, deltaPublicApi: 0, breakingChangesAllowed: true },
  'lib-domain':   { deltaCognitive: 5,  deltaStateTransitions: 2, deltaPublicApi: 5, breakingChangesAllowed: true },
  'lib-infra':    { deltaCognitive: 8,  deltaStateTransitions: 3, deltaPublicApi: 3, breakingChangesAllowed: true },
};
```

---

## 5. ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„

### 5.1 Public API

```typescript
// Core ë¶„ì„
export function analyzeSandwich(path: string, options?: AnalyzeOptions): Promise<ModuleAnalysis>;

// Gate ê²€ì‚¬
export function checkGate(path: string, gate: 'mvp' | 'production'): Promise<GateResult>;

// Budget ê²€ì‚¬
export function checkBudget(baseBranch: string, headBranch: string): Promise<BudgetCheckResult>;

// ë¼ë²¨ë§
export function getLabel(path: string): Promise<Axis>;

// ê¶Œì¥ì‚¬í•­
export function suggestRefactor(path: string): Promise<Recommendation[]>;

// ì¸ì§€ ì €í•˜ íƒì§€
export function checkDegradation(path: string): Promise<DegradationResult>;
```

### 5.2 MCP Tools

```typescript
const MCP_TOOLS = [
  {
    name: 'analyze_sandwich',
    description: 'ğŸğŸ§€ğŸ¥“ 3ì¶• ë³µì¡ë„ ë¶„ì„',
    parameters: { source: string, file_path?: string },
  },
  {
    name: 'analyze_cheese',
    description: 'ğŸ§€ ì¸ì§€ ê°€ëŠ¥ì„± ë¶„ì„',
    parameters: { source: string },
  },
  {
    name: 'check_gate',
    description: 'MVP/Production gate ì¡°ê±´ ê²€ì‚¬',
    parameters: { source: string, gate_type?: string, file_path?: string, project_root?: string },
  },
  {
    name: 'check_budget',
    description: 'PR ë³€ê²½ ì˜ˆì‚° ê²€ì‚¬',
    parameters: { before_source: string, after_source: string, module_type?: string },
  },
  {
    name: 'get_label',
    description: 'ëª¨ë“ˆì˜ ì§€ë°° ì¶• ë¼ë²¨ ë°˜í™˜',
    parameters: { source: string },
  },
  {
    name: 'suggest_refactor',
    description: 'ê· í˜• ë°©í–¥ ë¦¬íŒ©í† ë§ ì œì•ˆ',
    parameters: { source: string, module_type?: string },
  },
  {
    name: 'check_degradation',
    description: 'ì¸ì§€ ì €í•˜ ì§•í›„ íƒì§€',
    parameters: { before_source: string, after_source: string },
  },
];
```

### 5.3 MCP Resources

LLMì´ MCP ì„œë²„ ì„¤ì¹˜ í›„ ì‚¬ìš© ë°©ë²•ì„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ë¦¬ì†ŒìŠ¤ ì œê³µ:

```typescript
const MCP_RESOURCES = [
  {
    uri: 'docs://usage-guide',
    name: 'ì‚¬ìš© ê°€ì´ë“œ',
    description: 'semantic-complexity MCP ì„œë²„ ì‚¬ìš© ê°€ì´ë“œ',
    mimeType: 'text/markdown',
  },
];
```

**ë¦¬ì†ŒìŠ¤ ë‚´ìš©:**
- 3ì¶• ëª¨ë¸ ì„¤ëª… (Bread/Cheese/Ham)
- ë„êµ¬ë³„ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤
- Gate ë‹¨ê³„ ì„¤ëª… (PoC/MVP/Production)
- ì¸ì§€ ë³µì¡ë„ ì •ì˜

**ì–¸ì–´ë³„ êµ¬í˜„:**

| ì–¸ì–´ | êµ¬í˜„ ë°©ì‹ |
|------|-----------|
| Python | `@mcp.resource("docs://usage-guide")` ë°ì½”ë ˆì´í„° |
| TypeScript | `ListResourcesRequestSchema` + `ReadResourceRequestSchema` í•¸ë“¤ëŸ¬ |
| Go | `mcp.NewResource()` + `s.AddResource()` |

### 5.4 CLI ì¸í„°í˜ì´ìŠ¤

ëª¨ë“  MCP ì„œë²„ê°€ `--version` í”Œë˜ê·¸ ì§€ì›:

```bash
# Python
semantic-complexity-py-mcp --version

# TypeScript
semantic-complexity-mcp --version

# Go
sc-go-mcp --version
```

---

## 6. ì°¸ì¡°

- [THEORY.ko.md](../THEORY.ko.md) - ì´ë¡ ì  í† ëŒ€
- [SRS.ko.md](./SRS.ko.md) - ìš”êµ¬ì‚¬í•­ ëª…ì„¸
- [MODULE_TYPES.ko.md](./MODULE_TYPES.ko.md) - ëª¨ë“ˆ íƒ€ì… ë¶„ë¥˜ ì²´ê³„
- [REGULATORY_WEIGHTS.ko.md](./REGULATORY_WEIGHTS.ko.md) - ê·œì œ ê¸°ë°˜ ê°€ì¤‘ì¹˜

---

## ë¬¸ì„œ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| 1.0 | 2025-12-24 | ì´ˆê¸° ì„¤ê³„ ëª…ì„¸ ì‘ì„± |
| 1.1 | 2026-01-01 | 2.1 ML íŒŒì´í”„ë¼ì¸ êµ¬ì¡° ì¶”ê°€, 3.3 Bread / 3.4 Ham ì•Œê³ ë¦¬ì¦˜ ì¶”ê°€, 3.8 Gate / 3.9 Waiver ì¶”ê°€ |
| 1.2 | 2026-01-02 | 3.9.3 Waiver ìŠ¤í‚¤ë§ˆ ê°œì„  (pattern, adr, justification, approved_at, expires_at, approver) |
| 1.3 | 2026-01-03 | 5.2 MCP Tools íŒŒë¼ë¯¸í„° ì—…ë°ì´íŠ¸, 5.3 MCP Resources ì¶”ê°€ (docs://usage-guide) |
| 1.4 | 2026-01-03 | 5.4 CLI ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€ (--version í”Œë˜ê·¸) |
