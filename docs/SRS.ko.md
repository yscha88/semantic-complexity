# ì†Œí”„íŠ¸ì›¨ì–´ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ (SRS)
# semantic-complexity v1.0

English | [í•œêµ­ì–´](./SRS.ko.md)

---

## 1. ì„œë¡ 

### 1.1 ëª©ì 

ë³¸ ë¬¸ì„œëŠ” **í–„ ìƒŒë“œìœ„ì¹˜ ì •ë¦¬ (ğŸğŸ§€ğŸ¥“)**ì™€ **ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë‹¤ì°¨ì› ì½”ë“œ ë³µì¡ë„ ë¶„ì„ ì‹œìŠ¤í…œ **semantic-complexity**ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í•©ë‹ˆë‹¤.

ì‹œìŠ¤í…œì´ ì œê³µí•˜ëŠ” ê²ƒ:
- ê· í˜• ì¡íŒ ì„¤ê³„ ì§€ì ì˜ **ì¡´ì¬ì„± ë³´ì¥** (ìŠˆí˜ë¥´ë„ˆ)
- ê· í˜•ì ìœ¼ë¡œì˜ **ìˆ˜ë ´ ê²½ë¡œ** (Lyapunov)
- ì ì§„ì  ë¦¬íŒ©í† ë§ì„ ìœ„í•œ **ì‹¤ìš©ì  ì ˆì°¨**

### 1.2 ë²”ìœ„

semantic-complexityê°€ **ì•„ë‹Œ** ê²ƒ:
- ë‹¨ì¼ ìˆ«ì ë³µì¡ë„ ë©”íŠ¸ë¦­
- ì „ì—­ ìµœì í™” ë„êµ¬
- ì¸ê°„ íŒë‹¨ì˜ ëŒ€ì²´ë¬¼

semantic-complexityê°€ **ë§ëŠ”** ê²ƒ:
- 3ì¶• ë¼ë²¨ë§ ì‹œìŠ¤í…œ (ğŸğŸ§€ğŸ¥“)
- êµ­ì†Œì  ë³€ê²½ ê°€ì´ë“œ ì‹œìŠ¤í…œ
- PoC â†’ MVP â†’ Production ê²Œì´íŠ¸ ì¡°ê±´ ê²€ì¦ê¸°

### 1.3 ìš©ì–´ ì •ì˜

| ìš©ì–´ | ì •ì˜ |
|------|------|
| ğŸ ë¹µ (Security) | êµ¬ì¡°ì  ì•ˆì •ì„±: ì¸ì¦, ì•”í˜¸í™”, ì‹ ë¢° ê²½ê³„, ê·œì œ ì¤€ìˆ˜ |
| ğŸ§€ ì¹˜ì¦ˆ (Cognitive) | ë§¥ë½ ë°€ë„: ì¤‘ì²©, stateÃ—asyncÃ—retry, ìˆ¨ì€ ê²°í•© |
| ğŸ¥“ í–„ (Behavioral) | ìœ ì§€ë³´ìˆ˜ì„± ê· í˜•: ë³€ê²½ ê°€ëŠ¥ì„±, í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€, ë¦¬íŒ©í† ë§ ì•ˆì „ì„± |
| Canonical Profile | ê° ëª¨ë“ˆ íƒ€ì…ë³„ ê¸°ëŒ€ ğŸğŸ§€ğŸ¥“ ë¹„ìœ¨ |
| Change Budget | ì»¤ë°‹/PRë‹¹ í—ˆìš©ë˜ëŠ” ê° ì°¨ì›ì˜ ë¸íƒ€ |
| Protected Zone | ìˆ˜ì • ì‹œ ADR + ë¦¬ë·°ê°€ í•„ìš”í•œ íŒŒì¼ë“¤ |
| Simplex | ğŸğŸ§€ğŸ¥“ ê¼­ì§“ì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ 2-simplex (ì‚¼ê°í˜•) |
| Equilibrium Point | ì„¸ ì¶•ì´ ëª¨ë‘ ì˜ë¯¸ ìˆê²Œ ê· í˜• ì¡íŒ ì§€ì  |

### 1.4 ì°¸ì¡° ë¬¸í—Œ

- McCabe, T. (1976). A Complexity Measure
- Huntsman, S. (2020). Generalizing cyclomatic complexity via path homology
- SonarSource (2017). Cognitive Complexity
- MuÃ±oz BarÃ³n et al. (2020). Empirical Validation of Cognitive Complexity
- í–„ ìƒŒë“œìœ„ì¹˜ ì •ë¦¬ (Borsuk-Ulam)
- ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬

---

## 2. ì‹œìŠ¤í…œ ê°œìš”

### 2.1 í•µì‹¬ ì •ë¦¬: í–„ ìƒŒë“œìœ„ì¹˜ (ğŸğŸ§€ğŸ¥“)

```
ìœ ì§€ë³´ìˆ˜ì„±(ğŸ¥“)ì€
ë³´ì•ˆ êµ¬ì¡° ì•ˆì •ì„±(ğŸ)ê³¼ ë§¥ë½ ë°€ë„(ğŸ§€) ì‚¬ì´ì—ì„œë§Œ
ì˜ë¯¸ë¥¼ ê°–ëŠ”ë‹¤.

ì–´ëŠ í•˜ë‚˜ë§Œ ê·¹ëŒ€í™”í•˜ë©´ ì‹œìŠ¤í…œì´ í‡´í™”í•œë‹¤.
```

### 2.2 ì•ˆì •ì„± ë³´ì¥: ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬

```
ì ì ˆí•œ ê²½ê³„ ë¼ë²¨ë§ì„ ê°€ì§„ ì„¸ë¶„í™”ëœ simplexì—ëŠ”
ì„¸ ê°œì˜ ë¼ë²¨(ğŸğŸ§€ğŸ¥“)ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” ì™„ì „ ë‹¨ì²´ê°€
ë°˜ë“œì‹œ ì ì–´ë„ í•˜ë‚˜ ì¡´ì¬í•œë‹¤.

ê³µí•™ì  í•´ì„:
ê° ì¶•ì„ êµ­ì†Œì ìœ¼ë¡œ ì ì ˆíˆ ë¼ë²¨ë§í•˜ë©´,
ì „ì—­ì ìœ¼ë¡œ ê· í˜• ì¡íŒ ì„¤ê³„ ì§€ì ì´ ë°˜ë“œì‹œ ì¡´ì¬í•œë‹¤.
```

### 2.3 ìˆ˜ë ´: Lyapunov ì•ˆì •ì„±

```
ì—ë„ˆì§€ í•¨ìˆ˜:  E(v) = váµ€Mv + âŸ¨v,wâŸ©
ì•ˆì •ì :       âˆ‚E/âˆ‚v = 0 (canonical centroid)
ì•ˆì •ì„±:       M â‰¥ 0 (positive semidefinite)

E(v)ë¥¼ ê°ì†Œì‹œí‚¤ëŠ” ëª¨ë“  ë¦¬íŒ©í† ë§ì€ ì•ˆì • ë°©í–¥ìœ¼ë¡œ ì´ë™í•œë‹¤.
```

### 2.4 ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         semantic-complexity          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                        â”‚                        â”‚
            â–¼                        â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ğŸ Security  â”‚       â”‚  ğŸ§€ Cognitive  â”‚       â”‚ ğŸ¥“ Behavioral  â”‚
    â”‚    Analyzer    â”‚       â”‚    Analyzer    â”‚       â”‚   Analyzer    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                        â”‚                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        Simplex Coordinator          â”‚
                    â”‚      (ë¼ë²¨ë§ + ê· í˜•ì  íƒìƒ‰)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                        â”‚                        â”‚
            â–¼                        â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Gate System  â”‚       â”‚ Change Budget â”‚       â”‚  Recommender  â”‚
    â”‚  (PoCâ†’MVP)    â”‚       â”‚    Tracker    â”‚       â”‚  (Gradient)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 3.1 3ì¶• ë¶„ì„ ì‹œìŠ¤í…œ

#### FR-3.1.1 ë³´ì•ˆ ì¶• (ğŸ) ë¶„ì„

**ì…ë ¥:** ì†ŒìŠ¤ ì½”ë“œ, ì„¤ì • íŒŒì¼, ë°°í¬ ë§¤ë‹ˆí˜ìŠ¤íŠ¸

**ì¶œë ¥:** ë³´ì•ˆ ì•ˆì •ì„± ì ìˆ˜ ë° ìœ„ë°˜ ì‚¬í•­

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.1.1.1 | ì‹ ë¢° ê²½ê³„ ì •ì˜ íƒì§€ | MUST |
| FR-3.1.1.2 | ì¸ì¦/ì¸ê°€ íë¦„ íŒ¨í„´ ì‹ë³„ | MUST |
| FR-3.1.1.3 | ì‹œí¬ë¦¿/ìê²©ì¦ëª… íŒ¨í„´ íƒì§€ | MUST |
| FR-3.1.1.4 | ì•”í˜¸í™” ì‚¬ìš© íŒ¨í„´ ì‹ë³„ | SHOULD |
| FR-3.1.1.5 | ë³´ì•ˆ ë³€ê²½ì˜ blast radius ê³„ì‚° | SHOULD |
| FR-3.1.1.6 | ê·œì œ ë¯¼ê° ì½”ë“œ ì˜ì—­ íƒì§€ | MAY |

**ë©”íŠ¸ë¦­:**
- Trust boundary ìˆ˜
- ì¸ì¦ ë ˆì´ì–´ ëª…ì‹œì„± ì ìˆ˜
- Secret lifecycle ìë™í™” ì ìˆ˜
- ë³´ì•ˆ ë³€ê²½ blast radius

#### FR-3.1.2 ì¸ì§€ ì¶• (ğŸ§€) ë¶„ì„

**ì…ë ¥:** ì†ŒìŠ¤ ì½”ë“œ AST

**ì¶œë ¥:** ë§¥ë½ ë°€ë„ ì ìˆ˜ ë° í•«ìŠ¤íŒŸ

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.1.2.1 | Cognitive Complexity ê³„ì‚° (SonarSource ë°©ì‹) | MUST |
| FR-3.1.2.2 | stateÃ—asyncÃ—retry ë™ì‹œ ì¡´ì¬ íƒì§€ | MUST |
| FR-3.1.2.3 | ìˆ¨ì€ ì˜ì¡´ì„± ì¹´ìš´íŠ¸ (ì•”ë¬µì  I/O, ì „ì—­) | MUST |
| FR-3.1.2.4 | ê¹Šì´ íŒ¨ë„í‹° ê¸°ë°˜ ì¤‘ì²© ì¸¡ì • (ê°œìˆ˜ ì•„ë‹˜) | MUST |
| FR-3.1.2.5 | í•¨ìˆ˜ë‹¹ ê°œë… ìˆ˜ íƒì§€ (> 5 = ê²½ê³ ) | SHOULD |
| FR-3.1.2.6 | Persistent Homology ê³„ì‚° (êµ¬ì¡° ìƒì¡´) | MAY |

**ë©”íŠ¸ë¦­:**
- Cognitive Complexity ì ìˆ˜
- StateÃ—AsyncÃ—Retry ìœ„ë°˜ í”Œë˜ê·¸
- ìˆ¨ì€ ì˜ì¡´ì„± ìˆ˜
- ì¤‘ì²© ê¹Šì´ íŒ¨ë„í‹° (Î£depth, ê°œìˆ˜ ì•„ë‹˜)
- ê°œë… ë°€ë„ ì ìˆ˜

**í˜„ì¬ êµ¬í˜„ì—ì„œì˜ í•µì‹¬ ë³€ê²½:**

```
í˜„ì¬ (McCabe):
  switch 10 cases â†’ control += 10

í•„ìš” (Cognitive):
  switch 10 cases â†’ control += 1 (ë‹¨ì¼ ë¶„ê¸° êµ¬ì¡°)
  nested if 3 depth â†’ control += 1 + 2 + 3 = 6 (ê¹Šì´ íŒ¨ë„í‹°)
```

#### FR-3.1.3 í–‰ë™ ì¶• (ğŸ¥“) ë¶„ì„

**ì…ë ¥:** ì†ŒìŠ¤ ì½”ë“œ, í…ŒìŠ¤íŠ¸ íŒŒì¼, git íˆìŠ¤í† ë¦¬

**ì¶œë ¥:** ìœ ì§€ë³´ìˆ˜ì„± ê· í˜• ì ìˆ˜

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.1.3.1 | í•µì‹¬ ê²½ë¡œì— ëŒ€í•œ golden test ì¡´ì¬ íƒì§€ | MUST |
| FR-3.1.3.2 | APIì— ëŒ€í•œ contract test ì¡´ì¬ íƒì§€ | MUST |
| FR-3.1.3.3 | í•µì‹¬ ê²½ë¡œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê³„ì‚° | SHOULD |
| FR-3.1.3.4 | git íˆìŠ¤í† ë¦¬ì—ì„œ ë³€ê²½ ë¦¬ë“œíƒ€ì„ ë¶„ì„ | MAY |
| FR-3.1.3.5 | ê²°í•¨ ìœ ì…ë¥  ë¶„ì„ | MAY |
| FR-3.1.3.6 | PR í¬ê¸° íŒ¨í„´ íƒì§€ | MAY |

**ë©”íŠ¸ë¦­:**
- Golden test ì»¤ë²„ë¦¬ì§€ ë¹„ìœ¨
- Contract test ì¡´ì¬ í”Œë˜ê·¸
- í•µì‹¬ ê²½ë¡œ ë³´í˜¸ ë¹„ìœ¨
- ë³€ê²½ ë¦¬ë“œíƒ€ì„ (git ê¸°ë°˜)
- ê²°í•¨ ìœ ì…ë¥  (git ê¸°ë°˜)

### 3.2 ëª¨ë“ˆ íƒ€ì… ë¶„ë¥˜

#### FR-3.2.1 ì£¼ìš” ëª¨ë“ˆ íƒ€ì…

| íƒ€ì… | ì„¤ëª… | ê¸°ë³¸ ğŸğŸ§€ğŸ¥“ ë¹„ìœ¨ |
|------|------|------------------|
| `deploy` | K8s, Helm, ArgoCD, secrets, network policy | 70 / 10 / 20 |
| `api-external` | ê³ ê°/3rd-party ëŒ€ë©´, ê³„ì•½ êµ¬ì† | 50 / 20 / 30 |
| `api-internal` | ì„œë¹„ìŠ¤ê°„ í†µì‹ , ë‚´ë¶€ ì•ˆì •ì„± | 30 / 30 / 40 |
| `app` | ì›Œí¬í”Œë¡œìš°, ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜, ìƒíƒœ ë¨¸ì‹  | 20 / 50 / 30 |
| `lib-domain` | ìˆœìˆ˜ ë„ë©”ì¸ ë¡œì§, ê·œì¹™, ê²€ì¦ | 10 / 30 / 60 |
| `lib-infra` | ê³µí†µ í´ë¼ì´ì–¸íŠ¸, ë¯¸ë“¤ì›¨ì–´, ìœ í‹¸ë¦¬í‹° | 20 / 30 / 50 |

#### FR-3.2.2 ëª¨ë“ˆ íƒ€ì… íƒì§€

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.2.2.1 | íŒŒì¼ ê²½ë¡œ íŒ¨í„´ì—ì„œ ëª¨ë“ˆ íƒ€ì… ìë™ íƒì§€ | MUST |
| FR-3.2.2.2 | ì„¤ì •ì„ í†µí•œ ìˆ˜ë™ ì˜¤ë²„ë¼ì´ë“œ í—ˆìš© | MUST |
| FR-3.2.2.3 | ì»¤ìŠ¤í…€ ë¹„ìœ¨ì„ ê°€ì§„ ì»¤ìŠ¤í…€ ëª¨ë“ˆ íƒ€ì… ì§€ì› | SHOULD |

### 3.3 Canonical Profile ì‹œìŠ¤í…œ

#### FR-3.3.1 í”„ë¡œíŒŒì¼ ì •ì˜

ê° ëª¨ë“ˆ íƒ€ì…ì€ ë‹¤ìŒì„ ì •ì˜í•˜ëŠ” canonical profileì„ ê°€ì§:

```typescript
interface CanonicalProfile {
  moduleType: ModuleType;

  // ê¸°ëŒ€ ğŸğŸ§€ğŸ¥“ ë¹„ìœ¨ (í•©ê³„ 100)
  bread: number;    // Security ê°€ì¤‘ì¹˜
  cheese: number;   // Cognitive ê°€ì¤‘ì¹˜
  ham: number;      // Behavioral ê°€ì¤‘ì¹˜

  // ê° ì¶•ì˜ ì„ê³„ê°’
  thresholds: {
    bread: { min: number; max: number };
    cheese: { min: number; max: number };
    ham: { min: number; max: number };
  };

  // PRë‹¹ ë³€ê²½ ì˜ˆì‚°
  changeBudget: {
    deltaCognitive: number;
    deltaStateTransitions: number;
    deltaPublicApi: number;
    breakingChangesAllowed: boolean;
  };
}
```

#### FR-3.3.2 í¸ì°¨ ë¶„ì„

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.3.2.1 | ëª¨ë“ˆì˜ í˜„ì¬ ğŸğŸ§€ğŸ¥“ ë¹„ìœ¨ ê³„ì‚° | MUST |
| FR-3.3.2.2 | canonical profileê³¼ ë¹„êµ | MUST |
| FR-3.3.2.3 | ì–´ë–¤ ì¶•ì´ ê³¼ë‹¤/ê³¼ì†Œì¸ì§€ ì‹ë³„ | MUST |
| FR-3.3.2.4 | canonical centroidê¹Œì§€ì˜ ê±°ë¦¬ ê³„ì‚° | SHOULD |
| FR-3.3.2.5 | ê· í˜•ì ìœ¼ë¡œ ì´ë™í•  ë°©í–¥ ì œì•ˆ | MUST |

### 3.4 Simplex ë¼ë²¨ë§ ì‹œìŠ¤í…œ

#### FR-3.4.1 ëª¨ë“ˆ/PR ë¼ë²¨ë§

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.4.1.1 | ê° ëª¨ë“ˆì— ìš°ì„¸ ë¼ë²¨ (ğŸ/ğŸ§€/ğŸ¥“) ë¶€ì—¬ | MUST |
| FR-3.4.1.2 | ë³€ê²½ ê¸°ë°˜ìœ¼ë¡œ ê° PRì— ìš°ì„¸ ë¼ë²¨ ë¶€ì—¬ | MUST |
| FR-3.4.1.3 | ì½”ë“œë² ì´ìŠ¤ ì „ì²´ì˜ ë¼ë²¨ ë¶„í¬ ì¶”ì  | SHOULD |

**ë¼ë²¨ë§ ê·œì¹™:**

```
ğŸ ë¼ë²¨: ë³´ì•ˆ ì œì•½ì´ ìš°ì„¸
  - ì¸ì¦/ì¸ê°€ ë³€ê²½
  - ì•”í˜¸í™” ë³€ê²½
  - ì‹ ë¢° ê²½ê³„ ìˆ˜ì •
  - ê·œì œ ë¯¼ê° ì½”ë“œ

ğŸ§€ ë¼ë²¨: ë§¥ë½ ë°€ë„ê°€ ìš°ì„¸
  - ë†’ì€ cognitive complexity
  - StateÃ—asyncÃ—retry ë™ì‹œ ì¡´ì¬
  - ìˆ¨ì€ ê²°í•© ì¦ê°€

ğŸ¥“ ë¼ë²¨: ìœ ì§€ë³´ìˆ˜ì„±ì´ ìš°ì„¸
  - ë¦¬íŒ©í† ë§ PR
  - í…ŒìŠ¤íŠ¸ ì¶”ê°€
  - API surface ë³€ê²½
  - ë¬¸ì„œí™”
```

#### FR-3.4.2 ê· í˜•ì  íƒì§€

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.4.2.1 | ëª¨ë“ˆì´ ê· í˜• ì˜ì—­ì— ìˆëŠ”ì§€ íƒì§€ | MUST |
| FR-3.4.2.2 | ì½”ë“œë² ì´ìŠ¤ì— ğŸğŸ§€ğŸ¥“ ì™„ì „ simplexê°€ ìˆëŠ”ì§€ íƒì§€ | SHOULD |
| FR-3.4.2.3 | ê· í˜•ì  ë°©í–¥ì˜ gradient ì œê³µ | MUST |

### 3.5 ê²Œì´íŠ¸ ì‹œìŠ¤í…œ

#### FR-3.5.1 MVP ì§„ì… ê²Œì´íŠ¸

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.5.1.1 | ğŸ ì²´í¬: Trust boundary ëª…ì‹œì  ì •ì˜ | MUST |
| FR-3.5.1.2 | ğŸ ì²´í¬: ì¸ì¦/ì¸ê°€ íë¦„ ê³ ì • | MUST |
| FR-3.5.1.3 | ğŸ§€ ì²´í¬: í•µì‹¬ ëª¨ë“ˆ cognitive ì„ê³„ê°’ ë¯¸ë§Œ | MUST |
| FR-3.5.1.4 | ğŸ§€ ì²´í¬: stateÃ—asyncÃ—retry ìœ„ë°˜ ì—†ìŒ | MUST |
| FR-3.5.1.5 | ğŸ¥“ ì²´í¬: í•µì‹¬ í”Œë¡œìš°ì— Golden test ì¡´ì¬ | MUST |
| FR-3.5.1.6 | í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ ì‹œ "ìƒŒë“œìœ„ì¹˜ ë¯¸í˜•ì„±" ë°˜í™˜ | MUST |

**ê²Œì´íŠ¸ ê²°ê³¼:**

```typescript
interface GateResult {
  canEnterMvp: boolean;

  bread: {
    passed: boolean;
    trustBoundaryDefined: boolean;
    authFlowFixed: boolean;
    violations: string[];
  };

  cheese: {
    passed: boolean;
    maxCognitive: number;
    threshold: number;
    stateAsyncRetryViolations: string[];
  };

  ham: {
    passed: boolean;
    goldenTestCoverage: number;
    criticalPathsProtected: string[];
    unprotectedPaths: string[];
  };

  sandwichFormed: boolean;
}
```

#### FR-3.5.2 PR ê²Œì´íŠ¸

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.5.2.1 | PRì˜ change budget ì²´í¬ | MUST |
| FR-3.5.2.2 | ë³´í˜¸êµ¬ì—­ ìˆ˜ì • íƒì§€ | MUST |
| FR-3.5.2.3 | ğŸ ë³€ê²½ ì‹œ ADR ìš”êµ¬ | MUST |
| FR-3.5.2.4 | ğŸ¥“ í–‰ë™ ë³€ê²½ì€ ë‹¨ì¼ ëª©ì  ìš”êµ¬ | SHOULD |
| FR-3.5.2.5 | ğŸ§€ ê°ì†Œ PRì€ ììœ ë¡­ê²Œ í—ˆìš© | MUST |

### 3.6 Change Budget ì‹œìŠ¤í…œ

#### FR-3.6.1 ì˜ˆì‚° ì •ì˜

| ëª¨ë“ˆ íƒ€ì… | Î”Cognitive | Î”State | Î”PublicAPI | Breaking |
|----------|------------|--------|------------|----------|
| api-external | â‰¤ 3 | â‰¤ 1 | â‰¤ 2 | NO |
| api-internal | â‰¤ 5 | â‰¤ 2 | â‰¤ 3 | ADR í•„ìš” |
| app | â‰¤ 8 | â‰¤ 3 | N/A | N/A |
| lib-domain | â‰¤ 5 | â‰¤ 2 | â‰¤ 5 | ADR í•„ìš” |
| lib-infra | â‰¤ 8 | â‰¤ 3 | â‰¤ 3 | ADR í•„ìš” |
| deploy | â‰¤ 2 | N/A | N/A | ADR + ë³´ì•ˆ ë¦¬ë·° |

#### FR-3.6.2 ì˜ˆì‚° ì¶”ì 

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.6.2.1 | PRë‹¹ ê° ì¶•ì˜ delta ê³„ì‚° | MUST |
| FR-3.6.2.2 | ëª¨ë“ˆ íƒ€ì… ì˜ˆì‚°ê³¼ ë¹„êµ | MUST |
| FR-3.6.2.3 | ì˜ˆì‚° ìœ„ë°˜ ë³´ê³  | MUST |
| FR-3.6.2.4 | ì‹œê°„ì— ë”°ë¥¸ ëˆ„ì  ì˜ˆì‚° ì¶”ì  | MAY |

### 3.7 ë³´í˜¸êµ¬ì—­ ì‹œìŠ¤í…œ

#### FR-3.7.1 ì˜ì—­ ì •ì˜

**Deploy Repository ë³´í˜¸êµ¬ì—­:**
- `*/rbac/*`
- `*/network-policy/*`
- `*/ingress/*`
- `*/tls/*`
- `*/secrets/*`
- `*/sealed-secrets/*`

**Source Repository ë³´í˜¸êµ¬ì—­:**
- `*/auth/*`, `*/authn/*`, `*/authz/*`
- `*/crypto/*`, `*/encryption/*`
- `*/patient-data/*`, `*/phi/*`, `*/pii/*`
- `*/audit/*`, `*/logging/audit*`

#### FR-3.7.2 ì˜ì—­ ê°•ì œ

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.7.2.1 | ë³´í˜¸êµ¬ì—­ ìˆ˜ì • íƒì§€ | MUST |
| FR-3.7.2.2 | ë³´í˜¸êµ¬ì—­ ë³€ê²½ ì‹œ ADR ì°¸ì¡° ìš”êµ¬ | MUST |
| FR-3.7.2.3 | ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì¦ê±° ìš”êµ¬ | SHOULD |
| FR-3.7.2.4 | ì»¤ìŠ¤í…€ ë³´í˜¸êµ¬ì—­ íŒ¨í„´ ì§€ì› | MUST |

### 3.8 ì¸ì§€ê¸°ëŠ¥ì €í•˜ íƒì§€

#### FR-3.8.1 ì €í•˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë‹¤ìŒ ì¡°ê±´ ì¤‘ **2ê°œ ì´ìƒ** ì¶©ì¡± ì‹œ ì¸ì§€ê¸°ëŠ¥ì €í•˜ íƒì§€:

| # | ì¡°ê±´ | íƒì§€ ë°©ë²• |
|---|------|----------|
| 1 | ì•”ë¬µì  ì»¨í…ìŠ¤íŠ¸ ì˜ì¡´ â‰¥ 2ê°œ | ìˆ¨ì€ ê²°í•© ë¶„ì„ |
| 2 | stateÃ—asyncÃ—retry ë™ì‹œ ì¡´ì¬ | AST íŒ¨í„´ íƒì§€ |
| 3 | PRì´ í•µì‹¬ íŒŒì¼ â‰¥ 25ê°œ ìˆ˜ì • | Git diff ë¶„ì„ |
| 4 | golden/contract test ë¶€ì¬ | í…ŒìŠ¤íŠ¸ íŒŒì¼ íƒì§€ |
| 5 | í–‰ë™ ì„¤ëª… ì–´ë ¤ì›€ | (ìˆ˜ë™ í”Œë˜ê·¸) |
| 6 | ì˜¨ë³´ë”© 30ë¶„ ë‚´ ì„¤ëª… ë¶ˆê°€ | (ìˆ˜ë™ í”Œë˜ê·¸) |

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.8.1.1 | ìë™í™” ê°€ëŠ¥í•œ ì¡°ê±´ (1-4) ì²´í¬ | MUST |
| FR-3.8.1.2 | ìœ„ë°˜ ìˆ˜ ì¹´ìš´íŠ¸ ë° â‰¥ 2 ì„ê³„ê°’ | MUST |
| FR-3.8.1.3 | ì €í•˜ êµ¬ì—­ ìƒíƒœ ë³´ê³  | MUST |
| FR-3.8.1.4 | ì¡°ê±´ 5-6ì— ëŒ€í•œ ìˆ˜ë™ í”Œë˜ê·¸ ì§€ì› | MAY |

### 3.9 ì¶”ì²œ ì‹œìŠ¤í…œ

#### FR-3.9.1 Gradient ê¸°ë°˜ ì¶”ì²œ

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.9.1.1 | ê· í˜•ì  ë°©í–¥ì˜ gradient ê³„ì‚° | MUST |
| FR-3.9.1.2 | êµ¬ì²´ì  ë¦¬íŒ©í† ë§ ì•¡ì…˜ ì œì•ˆ | MUST |
| FR-3.9.1.3 | ì˜ˆìƒ ì˜í–¥ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ ì§€ì • | SHOULD |
| FR-3.9.1.4 | ëª¨ë“ˆ íƒ€ì… ì œì•½ ì¤€ìˆ˜ | MUST |

**ì¶”ì²œ í˜•ì‹:**

```typescript
interface Recommendation {
  axis: 'ğŸ' | 'ğŸ§€' | 'ğŸ¥“';
  priority: number;
  action: string;
  expectedImpact: {
    deltaBread: number;
    deltaCheese: number;
    deltaHam: number;
  };
  targetEquilibrium: boolean;
}
```

---

## 4. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 4.1 ì„±ëŠ¥

| ID | ìš”êµ¬ì‚¬í•­ | ëª©í‘œ |
|----|----------|------|
| NFR-4.1.1 | ë‹¨ì¼ íŒŒì¼ ë¶„ì„ | < 100ms |
| NFR-4.1.2 | ì „ì²´ í”„ë¡œì íŠ¸ ë¶„ì„ (1000 íŒŒì¼) | < 30s |
| NFR-4.1.3 | PR delta ë¶„ì„ | < 5s |

### 4.2 ì •í™•ë„

| ID | ìš”êµ¬ì‚¬í•­ | ëª©í‘œ |
|----|----------|------|
| NFR-4.2.1 | Cognitive Complexityê°€ SonarSourceì™€ ì¼ì¹˜ | 95% |
| NFR-4.2.2 | ëª¨ë“ˆ íƒ€ì… ìë™ íƒì§€ ì •í™•ë„ | 90% |
| NFR-4.2.3 | ìœ„ë°˜ false positive ë¹„ìœ¨ | < 10% |

### 4.3 í™•ì¥ì„±

| ID | ìš”êµ¬ì‚¬í•­ |
|----|----------|
| NFR-4.3.1 | ì»¤ìŠ¤í…€ ëª¨ë“ˆ íƒ€ì… ì§€ì› |
| NFR-4.3.2 | ì»¤ìŠ¤í…€ canonical profile ì§€ì› |
| NFR-4.3.3 | ì»¤ìŠ¤í…€ ë³´í˜¸êµ¬ì—­ íŒ¨í„´ ì§€ì› |
| NFR-4.3.4 | ìƒˆ ë¶„ì„ê¸°ë¥¼ ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜ |

### 4.4 ì–¸ì–´ ì§€ì›

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| NFR-4.4.1 | TypeScript/JavaScript | MUST |
| NFR-4.4.2 | Python | MUST |
| NFR-4.4.3 | Go | MUST |
| NFR-4.4.4 | LSPë¥¼ í†µí•œ ê¸°íƒ€ ì–¸ì–´ | MAY |

---

## 5. ì¸í„°í˜ì´ìŠ¤ ìš”êµ¬ì‚¬í•­

### 5.1 CLI ì¸í„°í˜ì´ìŠ¤

```bash
# ğŸğŸ§€ğŸ¥“ ì¶œë ¥ìœ¼ë¡œ ë¶„ì„
semantic-complexity analyze ./src --format sandwich

# MVP ê²Œì´íŠ¸ ì²´í¬
semantic-complexity gate mvp ./src

# PR ì˜ˆì‚° ì²´í¬
semantic-complexity budget ./src --base main --head feature

# ëª¨ë“ˆ ë¼ë²¨ë§
semantic-complexity label ./src/auth
```

### 5.2 MCP (Model Context Protocol) ì¸í„°í˜ì´ìŠ¤

```typescript
// ë„êµ¬ë“¤
- analyze_sandwich(path, moduleType)
- check_gate(path, gateType)
- check_budget(baseBranch, headBranch)
- get_label(path)
- suggest_refactor(path)
- check_degradation(path)
```

### 5.3 ì¶œë ¥ í˜•ì‹

#### 5.3.1 Sandwich í˜•ì‹

```json
{
  "module": "src/auth",
  "moduleType": "api-external",
  "sandwich": {
    "bread": 45,
    "cheese": 25,
    "ham": 30,
    "canonical": { "bread": 50, "cheese": 20, "ham": 30 },
    "deviation": { "bread": -5, "cheese": +5, "ham": 0 },
    "label": "ğŸ§€",
    "inEquilibrium": false
  },
  "recommendations": [
    {
      "axis": "ğŸ§€",
      "action": "ìƒíƒœ ë¨¸ì‹ ì„ ë³„ë„ ëª¨ë“ˆë¡œ ì¶”ì¶œ",
      "expectedImpact": { "cheese": -8 }
    }
  ]
}
```

#### 5.3.2 Gate í˜•ì‹

```json
{
  "gate": "mvp",
  "passed": false,
  "sandwichFormed": false,
  "axes": {
    "bread": { "passed": true, "details": "..." },
    "cheese": { "passed": false, "violations": ["OrderServiceì— stateÃ—asyncÃ—retry ì¡´ì¬"] },
    "ham": { "passed": true, "details": "..." }
  }
}
```

---

## 6. ë°ì´í„° ëª¨ë¸

### 6.1 í•µì‹¬ íƒ€ì…

```typescript
type Axis = 'ğŸ' | 'ğŸ§€' | 'ğŸ¥“';

type ModuleType =
  | 'deploy'
  | 'api-external'
  | 'api-internal'
  | 'app'
  | 'lib-domain'
  | 'lib-infra';

interface SandwichScore {
  bread: number;      // 0-100
  cheese: number;     // 0-100
  ham: number;        // 0-100
  // bread + cheese + ham = 100
}

interface CanonicalProfile {
  moduleType: ModuleType;
  canonical: SandwichScore;
  thresholds: Record<Axis, { min: number; max: number }>;
  changeBudget: ChangeBudget;
}

interface ModuleAnalysis {
  path: string;
  moduleType: ModuleType;
  current: SandwichScore;
  canonical: SandwichScore;
  deviation: SandwichScore;
  label: Axis;
  inEquilibrium: boolean;
  violations: Violation[];
  recommendations: Recommendation[];
}
```

### 6.2 ë¶ˆë³€ì¡°ê±´ íƒ€ì…

```typescript
interface CognitiveInvariant {
  // state Ã— async Ã— retryëŠ” ê³µì¡´ ë¶ˆê°€
  hasState: boolean;
  hasAsync: boolean;
  hasRetry: boolean;
  violated: boolean;
}

interface HiddenCoupling {
  globalAccess: string[];
  implicitIO: string[];
  envDependency: string[];
  closureCaptures: string[];
  total: number;
  threshold: number;
  violated: boolean;
}
```

---

## 7. ì œì•½ì‚¬í•­

### 7.1 ìˆ˜í•™ì  ì œì•½

1. **Simplex ì œì•½**: bread + cheese + ham = 100
2. **ë¹„ìŒìˆ˜ì„±**: ëª¨ë“  ì¶• â‰¥ 0
3. **ìŠˆí˜ë¥´ë„ˆ ì¡°ê±´**: ê²½ê³„ ë¼ë²¨ë§ì´ ì¼ê´€ì„± ìˆì–´ì•¼ í•¨

### 7.2 ê³µí•™ì  ì œì•½

1. **ì¸ì§€ ë¶ˆë³€ì¡°ê±´**: state Ã— async Ã— retryëŠ” ê°™ì€ í•¨ìˆ˜/ëª¨ë“ˆì— ê³µì¡´ ë¶ˆê°€
2. **ë³´í˜¸êµ¬ì—­**: ë³€ê²½ ì‹œ ADR + ì¦ê±° í•„ìš”
3. **Change Budget**: ë¸íƒ€ê°€ ëª¨ë“ˆ íƒ€ì… í•œë„ë¥¼ ì´ˆê³¼í•˜ë©´ ì•ˆ ë¨

### 7.3 êµ¬í˜„ ì œì•½

1. ğŸ§€ ì¶•ì—ëŠ” ë°˜ë“œì‹œ Cognitive Complexity ì‚¬ìš© (McCabe ì•„ë‹˜)
2. ì ì§„ì  ë¶„ì„ ì§€ì› í•„ìˆ˜ (PR ìˆ˜ì¤€)
3. delta ë¶„ì„ì„ ìœ„í•´ gitê³¼ í†µí•© í•„ìˆ˜

---

## 8. ë¶€ë¡

### A. Cognitive Complexity ê³„ì‚° (í•„ìˆ˜)

McCabe ìˆœí™˜ë³µì¡ë„ì™€ ë‹¤ë¦„:

```
McCabe: ê° ê²°ì •ì  = +1
        switch 10 cases = +10

Cognitive:
  - êµ¬ì¡°ì  ì¦ë¶„: ì œì–´ êµ¬ì¡°ì— +1
  - ì¤‘ì²© íŒ¨ë„í‹°: ê¹Šì´ Nì— +N
  - ì¦ë¶„ ì—†ìŒ: switch cases (fan-out, ì‚¬ì´í´ ì•„ë‹˜)

        switch 10 cases = +1 (ë‹¨ì¼ êµ¬ì¡°)
        nested if (depth 3) = +1 + +2 + +3 = +6
```

### B. ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬ ì ìš©

```
2-Simplex: ğŸ, ğŸ§€, ğŸ¥“ ê¼­ì§“ì ì„ ê°€ì§„ ì‚¼ê°í˜•

ì„¸ë¶„í™”: ê° ëª¨ë“ˆ/PRì´ ë¶€ë¶„ ì‚¼ê°í˜•

ë¼ë²¨ë§: ê° ë¶€ë¶„ ì‚¼ê°í˜• ê¼­ì§“ì ì— ìš°ì„¸ ì¶• ë¼ë²¨

ì •ë¦¬: ì„¸ ë¼ë²¨ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” ë¶€ë¶„ ì‚¼ê°í˜•ì´ ì ì–´ë„ í•˜ë‚˜ ì¡´ì¬

ê³µí•™: ê· í˜• ì¡íŒ ì„¤ê³„ ì§€ì ì´ ë°˜ë“œì‹œ ì¡´ì¬
```

### C. ëª¨ë“ˆ íƒ€ì… íƒì§€ íŒ¨í„´

```typescript
const MODULE_PATTERNS = {
  'deploy': [
    '**/k8s/**', '**/helm/**', '**/deploy/**',
    '**/manifests/**', '**/.github/workflows/**'
  ],
  'api-external': [
    '**/api/external/**', '**/api/public/**',
    '**/routes/v*/**'
  ],
  'api-internal': [
    '**/api/internal/**', '**/grpc/**',
    '**/events/**'
  ],
  'app': [
    '**/app/**', '**/services/**',
    '**/workflows/**', '**/jobs/**'
  ],
  'lib-domain': [
    '**/domain/**', '**/models/**',
    '**/rules/**', '**/validators/**'
  ],
  'lib-infra': [
    '**/lib/**', '**/utils/**',
    '**/common/**', '**/shared/**'
  ]
};
```

---

## ë¬¸ì„œ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ         | ì‘ì„±ì | ë³€ê²½ì‚¬í•­ |
|------|------------|--------|----------|
| 1.0 | 2025-12-24 | semantic-complexity team | ì´ë¡ ì  í† ëŒ€ ê¸°ë°˜ ì´ˆê¸° SRS |
