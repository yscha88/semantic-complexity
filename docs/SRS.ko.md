# ì†Œí”„íŠ¸ì›¨ì–´ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ (SRS)
# semantic-complexity v1.0

---

## 1. ì„œë¡ 

### 1.1 ëª©ì 

ë³¸ ë¬¸ì„œëŠ” **í–„ ìƒŒë“œìœ„ì¹˜ ì •ë¦¬ (ğŸğŸ§€ğŸ¥“)**ì™€ **ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ë‹¤ì°¨ì› ì½”ë“œ ë³µì¡ë„ ë¶„ì„ ì‹œìŠ¤í…œ **semantic-complexity**ì˜ ì†Œí”„íŠ¸ì›¨ì–´ ìš”êµ¬ì‚¬í•­ì„ ì •ì˜í•©ë‹ˆë‹¤.

ì‹œìŠ¤í…œì´ ì œê³µí•˜ëŠ” ê²ƒ:
- ê· í˜• ì¡íŒ ì„¤ê³„ ì§€ì ì˜ **ì¡´ì¬ì„± ë³´ì¥** (ìŠˆí˜ë¥´ë„ˆ)
- ê· í˜•ì ìœ¼ë¡œì˜ **ìˆ˜ë ´ ê²½ë¡œ** (Lyapunov)
- ì ì§„ì  ë¦¬íŒ©í† ë§ì„ ìœ„í•œ **ì‹¤ìš©ì  ì ˆì°¨**

### 1.2 ë²”ìœ„

semantic-complexityê°€ **ì•„ë‹Œ** ê²ƒ:
- ë‹¨ì¼ ìˆ«ì ë³µì¡ë„ ë©”íŠ¸ë¦­
- ì „ì—­ ìµœì í™” ë„êµ¬
- ì¸ê°„ íŒë‹¨ì˜ ëŒ€ì²´ë¬¼

semantic-complexityê°€ **ë§ëŠ”** ê²ƒ:
- 3ì¶• ë¼ë²¨ë§ ì‹œìŠ¤í…œ (ğŸğŸ§€ğŸ¥“)
- êµ­ì†Œì  ë³€ê²½ ê°€ì´ë“œ ì‹œìŠ¤í…œ
- PoC â†’ MVP â†’ Production ê²Œì´íŠ¸ ì¡°ê±´ ê²€ì¦ê¸°

### 1.3 ìš©ì–´ ì •ì˜

| ìš©ì–´ | ì •ì˜ |
|------|------|
| ğŸ ë¹µ (Security) | êµ¬ì¡°ì  ì•ˆì •ì„±: ì¸ì¦, ì•”í˜¸í™”, ì‹ ë¢° ê²½ê³„, ê·œì œ ì¤€ìˆ˜ |
| ğŸ§€ ì¹˜ì¦ˆ (Cognitive) | ë§¥ë½ ë°€ë„: ì¤‘ì²©, stateÃ—asyncÃ—retry, ìˆ¨ì€ ê²°í•© |
| ğŸ¥“ í–„ (Behavioral) | ìœ ì§€ë³´ìˆ˜ì„± ê· í˜•: ë³€ê²½ ê°€ëŠ¥ì„±, í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€, ë¦¬íŒ©í† ë§ ì•ˆì „ì„± |
| Canonical Profile | ê° ëª¨ë“ˆ íƒ€ì…ë³„ ê¸°ëŒ€ ğŸğŸ§€ğŸ¥“ ë¹„ìœ¨ |
| Change Budget | ì»¤ë°‹/PRë‹¹ í—ˆìš©ë˜ëŠ” ê° ì°¨ì›ì˜ ë¸íƒ€ |
| Protected Zone | ìˆ˜ì • ì‹œ ADR + ë¦¬ë·°ê°€ í•„ìš”í•œ íŒŒì¼ë“¤ |
| Simplex | ğŸğŸ§€ğŸ¥“ ê¼­ì§“ì ìœ¼ë¡œ ì´ë£¨ì–´ì§„ 2-simplex (ì‚¼ê°í˜•) |
| Equilibrium Point | ì„¸ ì¶•ì´ ëª¨ë‘ ì˜ë¯¸ ìˆê²Œ ê· í˜• ì¡íŒ ì§€ì  |

### 1.4 ì°¸ì¡° ë¬¸í—Œ

- McCabe, T. (1976). A Complexity Measure
- Huntsman, S. (2020). Generalizing cyclomatic complexity via path homology
- Miller, G. (1956). The Magical Number Seven, Plus or Minus Two (ì‘ì—… ê¸°ì–µ í•œê³„)
- í–„ ìƒŒë“œìœ„ì¹˜ ì •ë¦¬ (Borsuk-Ulam)
- ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬

---

## 2. ì‹œìŠ¤í…œ ê°œìš”

### 2.1 í•µì‹¬ ì •ë¦¬: í–„ ìƒŒë“œìœ„ì¹˜ (ğŸğŸ§€ğŸ¥“)

```
ìœ ì§€ë³´ìˆ˜ì„±(ğŸ¥“)ì€
ë³´ì•ˆ êµ¬ì¡° ì•ˆì •ì„±(ğŸ)ê³¼ ë§¥ë½ ë°€ë„(ğŸ§€) ì‚¬ì´ì—ì„œë§Œ
ì˜ë¯¸ë¥¼ ê°–ëŠ”ë‹¤.

ì–´ëŠ í•˜ë‚˜ë§Œ ê·¹ëŒ€í™”í•˜ë©´ ì‹œìŠ¤í…œì´ í‡´í™”í•œë‹¤.
```

### 2.2 ì•ˆì •ì„± ë³´ì¥: ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬

```
ì ì ˆí•œ ê²½ê³„ ë¼ë²¨ë§ì„ ê°€ì§„ ì„¸ë¶„í™”ëœ simplexì—ëŠ”
ì„¸ ê°œì˜ ë¼ë²¨(ğŸğŸ§€ğŸ¥“)ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” ì™„ì „ ë‹¨ì²´ê°€
ë°˜ë“œì‹œ ì ì–´ë„ í•˜ë‚˜ ì¡´ì¬í•œë‹¤.

ê³µí•™ì  í•´ì„:
ê° ì¶•ì„ êµ­ì†Œì ìœ¼ë¡œ ì ì ˆíˆ ë¼ë²¨ë§í•˜ë©´,
ì „ì—­ì ìœ¼ë¡œ ê· í˜• ì¡íŒ ì„¤ê³„ ì§€ì ì´ ë°˜ë“œì‹œ ì¡´ì¬í•œë‹¤.
```

### 2.3 ìˆ˜ë ´: Lyapunov ì•ˆì •ì„±

```
ì—ë„ˆì§€ í•¨ìˆ˜:  E(v) = váµ€Mv + âŸ¨v,wâŸ©
ì•ˆì •ì :       âˆ‚E/âˆ‚v = 0 (canonical centroid)
ì•ˆì •ì„±:       M â‰¥ 0 (positive semidefinite)

E(v)ë¥¼ ê°ì†Œì‹œí‚¤ëŠ” ëª¨ë“  ë¦¬íŒ©í† ë§ì€ ì•ˆì • ë°©í–¥ìœ¼ë¡œ ì´ë™í•œë‹¤.
```

### 2.4 ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚         semantic-complexity          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                        â”‚                        â”‚
            â–¼                        â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ğŸ Security  â”‚       â”‚  ğŸ§€ Cognitive  â”‚       â”‚ ğŸ¥“ Behavioral  â”‚
    â”‚    Analyzer    â”‚       â”‚    Analyzer    â”‚       â”‚   Analyzer    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                        â”‚                        â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        Simplex Coordinator          â”‚
                    â”‚      (ë¼ë²¨ë§ + ê· í˜•ì  íƒìƒ‰)          â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                        â”‚                        â”‚
            â–¼                        â–¼                        â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Gate System  â”‚       â”‚ Change Budget â”‚       â”‚  Recommender  â”‚
    â”‚  (PoCâ†’MVP)    â”‚       â”‚    Tracker    â”‚       â”‚  (Gradient)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.5 ì´ë¡  ê³„ì¸µ êµ¬ì¡°

ì‹œìŠ¤í…œì€ **ML íŒŒì´í”„ë¼ì¸**ê³¼ ìœ ì‚¬í•œ ì²˜ë¦¬ êµ¬ì¡°ë¥¼ ê°€ì§‘ë‹ˆë‹¤:

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  INPUT (Feature Extraction)                          [ë°ì´í„° ìˆ˜ì§‘] â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  5D Vector: [C, N, S, A, Î›]                                       â•‘
â•‘  AST ì •ì  ë¶„ì„ (ê²°ì •ì , context-free)                              â•‘
â•‘  íŒ¨í„´ íƒì§€ (Trust Boundary, Secret, Test ë“±)                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                 â”‚
                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROCESSING (Preprocessing + Parameters)         [ì „ì²˜ë¦¬/ê°€ì¤‘ì¹˜]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L2: ì •ê·œí™”                                                       â”‚
â”‚    - Simplex ì‚¬ì˜ (5D â†’ 3ì¶•)                                      â”‚
â”‚    - Anti-pattern Penalty                                         â”‚
â”‚    - ì œì™¸ í•­ëª© í•„í„° (self/cls, built-in)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  L3: íŒë‹¨ [LLM/Human ê°œì…]                                        â”‚
â”‚    - Essential Complexity Waiver                                  â”‚
â”‚    - ëª¨ë“ˆ íƒ€ì… Context ì£¼ì…                                        â”‚
â”‚    - ë³¸ì§ˆì  vs ìš°ë°œì  ë³µì¡ë„ íŒë‹¨                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  OUTPUT (Inference)                                    [ì¶”ë¡ ]     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  3ì¶• ì ìˆ˜: [ğŸ Bread, ğŸ§€ Cheese, ğŸ¥“ Ham]                          â•‘
â•‘  Gate ê²°ê³¼ (PoC/MVP/Production)                                   â•‘
â•‘  ë¦¬íŒ©í† ë§ ê¶Œì¥ì‚¬í•­ (-âˆ‡E)                                          â•‘
â•‘  Canonical í¸ì°¨ ë³´ê³                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

**í•µì‹¬ ì›ì¹™:**
- **INPUT (5D)**: Context-free ì¸¡ì •, ê²°ì •ì 
- **PROCESSING**: Context ì£¼ì…, ê°€ì¤‘ì¹˜/í•„í„° ì ìš©
- **OUTPUT (3ì¶•)**: Context-aware ì¶”ë¡  ê²°ê³¼

#### Layer 1: ì¸¡ì • ê³„ì¸µ (5D Complexity Vector)

**íŠ¹ì„±**: ìˆœìˆ˜ ì •ì  ë¶„ì„, ê²°ì •ì , LLM íŒë‹¨ ë¶ˆí•„ìš”

| ì°¨ì› | ê¸°í˜¸ | ì¸¡ì • ëŒ€ìƒ | ê°€ì¤‘ì¹˜ |
|------|------|-----------|--------|
| Control | C | if, switch, loop, ë…¼ë¦¬ì—°ì‚°ì | Ã—1.0 |
| Nesting | N | ì¤‘ì²© ê¹Šì´, ì½œë°± | Ã—1.5 |
| State | S | ìƒíƒœ ë³€ì´, hooks | Ã—2.0 |
| Async | A | async/await, Promise, goroutine | Ã—2.5 |
| Coupling | Î› | ì „ì—­ ì ‘ê·¼, I/O, ë¶€ìˆ˜íš¨ê³¼ | Ã—3.0 |

#### Layer 2: ì •ê·œí™” ê³„ì¸µ

**íŠ¹ì„±**: ìë™ ë³€í™˜, ê·œì¹™ ê¸°ë°˜

```
5D â†’ 3ì¶• ì‚¬ì˜:
ğŸ§€ Raw = f(C, N, hidden_coupling)
ğŸ Raw = g(S, A, Î›, trust_boundary, auth_flow)
ğŸ¥“ Raw = h(test_coverage, critical_path_protection)

Simplex ì •ê·œí™”:
ğŸ§€ + ğŸ + ğŸ¥“ = 100

Anti-pattern Penalty:
*args/kwargs ì‚¬ìš© ì‹œ +3 ê°œë… ìˆ˜ ì¶”ê°€
```

#### Layer 3: íŒë‹¨/ë©´ì œ ê³„ì¸µ

**íŠ¹ì„±**: LLM ë˜ëŠ” Human íŒë‹¨ í•„ìš”

| íŒë‹¨ ìœ í˜• | ì…ë ¥ | ê²°ê³¼ |
|-----------|------|------|
| Essential Complexity Waiver | ADR íŒŒì¼ ì°¸ì¡° | Gate ê²€ì‚¬ ìš°íšŒ |
| ëª¨ë“ˆ íƒ€ì… ì˜¤ë²„ë¼ì´ë“œ | `__module_type__` ì„ ì–¸ | Canonical Profile ë³€ê²½ |
| ë³¸ì§ˆì  ë³µì¡ë„ ì‹ í˜¸ | math/algorithm/domain íŒ¨í„´ | Waiver ìê²© íŒë‹¨ |

```python
# ì˜ˆ: Essential Complexity Waiver
__essential_complexity__ = {
    "adr": "docs/adr/003-inference.md",
}
# â†’ Production Gateì—ì„œë§Œ ë³µì¡ë„ ê²€ì‚¬ ìš°íšŒ
```

#### Layer 4: í•´ì„ ê³„ì¸µ

**íŠ¹ì„±**: Gate ê²°ê³¼ ë° ê¶Œì¥ì‚¬í•­ ìƒì„±

ëª¨ë“ˆ íƒ€ì…ë³„ Canonical Profile:

| ëª¨ë“ˆ íƒ€ì… | ğŸ Bread | ğŸ§€ Cheese | ğŸ¥“ Ham |
|-----------|----------|-----------|--------|
| deploy | 70 | 10 | 20 |
| api-external | 50 | 20 | 30 |
| api-internal | 30 | 30 | 40 |
| app | 20 | 50 | 30 |
| lib-domain | 10 | 30 | 60 |
| lib-infra | 20 | 30 | 50 |

í¸ì°¨ ë° ë¦¬íŒ©í† ë§ ë°©í–¥:
```
deviation = ||current - canonical||â‚‚
E(v) = deviationÂ² (ì—ë„ˆì§€ í•¨ìˆ˜)
ë¦¬íŒ©í† ë§ ë°©í–¥ = -âˆ‡E (ì—ë„ˆì§€ ê°ì†Œ ë°©í–¥)
```

#### ì¶•ë³„ Layer ê²°í•©

ê° ì¶•(ğŸğŸ§€ğŸ¥“)ì€ 4ê°œ layerë¥¼ **ëª¨ë‘** ê±°ì³ ê³„ì‚°ë©ë‹ˆë‹¤:

```
ğŸ§€ Cheese (Cognitive) - ì¸ì§€ ê°€ëŠ¥ ì—¬ë¶€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
L1 ì¸¡ì •   â”‚ C(Control), N(Nesting), hidden_deps ì¹´ìš´íŠ¸
L2 ì •ê·œí™” â”‚ Anti-pattern Penalty (+3 per *args/**kwargs)
          â”‚ ì œì™¸ í•­ëª© ì ìš© (self/cls, built-in, numpy)
L3 íŒë‹¨   â”‚ stateÃ—asyncÃ—retry ê³µì¡´ íŒë‹¨
          â”‚ ë³¸ì§ˆì  ë³µì¡ë„ ì‹ í˜¸ íƒì§€ (math/algorithm/domain)
L4 í•´ì„   â”‚ ì¸ì§€ ê°€ëŠ¥ ì¡°ê±´ 4ê°€ì§€ ê²€ì¦
          â”‚ â†’ accessible: true/false


ğŸ Bread (Security) - êµ¬ì¡° ì•ˆì •ì„±
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
L1 ì¸¡ì •   â”‚ S(State), A(Async), Î›(Coupling) ì¹´ìš´íŠ¸
          â”‚ Trust Boundary íŒ¨í„´ íƒì§€
          â”‚ Secret íŒ¨í„´ íƒì§€
L2 ì •ê·œí™” â”‚ SECRET_LEAK_PATTERNS ì ìš©
          â”‚ AUTH_EXPLICIT_PATTERNS ì ìˆ˜í™”
L3 íŒë‹¨   â”‚ AUTH_FLOW ì„ ì–¸ í™•ì¸ (NONE í¬í•¨)
          â”‚ Essential Waiver ì ìš© ì—¬ë¶€
L4 í•´ì„   â”‚ Trust Boundary ì •ì˜ ì—¬ë¶€
          â”‚ Auth ëª…ì‹œì„± ì ìˆ˜
          â”‚ â†’ violations ëª©ë¡


ğŸ¥“ Ham (Behavioral) - í–‰ë™ ë³´ì¡´ì„±
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
L1 ì¸¡ì •   â”‚ ì†ŒìŠ¤ í•¨ìˆ˜ëª… ì¶”ì¶œ
          â”‚ í…ŒìŠ¤íŠ¸ íŒŒì¼ ìë™ íƒìƒ‰ (discover_tests)
          â”‚ Critical Path íŒ¨í„´ íƒì§€ (payment, auth, data_mutation)
L2 ì •ê·œí™” â”‚ í•¨ìˆ˜-í…ŒìŠ¤íŠ¸ ë§¤ì¹­
          â”‚ Golden/Contract í…ŒìŠ¤íŠ¸ ë¶„ë¥˜
L3 íŒë‹¨   â”‚ Critical Path ë³´í˜¸ ì—¬ë¶€ íŒë‹¨
          â”‚ í…ŒìŠ¤íŠ¸ ì¶©ë¶„ì„± íŒë‹¨
L4 í•´ì„   â”‚ Golden Test ì»¤ë²„ë¦¬ì§€ ë¹„ìœ¨
          â”‚ Contract Test ì¡´ì¬ í”Œë˜ê·¸
          â”‚ â†’ critical_paths_protected/total
```

#### Contextì— ì˜í•œ í•´ì„

**ë™ì¼í•œ 5D ì¸¡ì •ê°’ë„ ëª¨ë“ˆ íƒ€ì…ì— ë”°ë¼ ë‹¤ë¥´ê²Œ í•´ì„ë©ë‹ˆë‹¤:**

| Context | ğŸ§€ Cheese í•´ì„ | ğŸ Bread í•´ì„ | ğŸ¥“ Ham í•´ì„ |
|---------|---------------|---------------|-------------|
| api/external | ì—„ê²© (Nâ‰¤3) | ë§¤ìš° ì—„ê²© | Contract í•„ìˆ˜ |
| lib/domain | ì¤‘ê°„ (Nâ‰¤4) | ì™„í™” | Golden í•„ìˆ˜ |
| app | ì™„í™” (Nâ‰¤5) | ì¤‘ê°„ | ê¶Œì¥ |
| deploy | - | ìµœì—„ê²© | - |

**í•µì‹¬ ì›ì¹™**: 5DëŠ” context-free ì¸¡ì •, 3ì¶•ì€ context-aware í•´ì„. ê° ê³„ì¸µì€ ë¶„ë¦¬ë˜ì–´ ìˆìœ¼ë©° í˜¼ìš© ê¸ˆì§€.

> ğŸ“„ ìƒì„¸ ì´ë¡ : [THEORY.ko.md](./THEORY.ko.md)

---

## 3. ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 3.1 3ì¶• ë¶„ì„ ì‹œìŠ¤í…œ

#### FR-3.1.1 ë³´ì•ˆ ì¶• (ğŸ) ë¶„ì„

**ì…ë ¥:** ì†ŒìŠ¤ ì½”ë“œ, ì„¤ì • íŒŒì¼, ë°°í¬ ë§¤ë‹ˆí˜ìŠ¤íŠ¸

**ì¶œë ¥:** ë³´ì•ˆ ì•ˆì •ì„± ì ìˆ˜ ë° ìœ„ë°˜ ì‚¬í•­

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.1.1.1 | ì‹ ë¢° ê²½ê³„ ì •ì˜ íƒì§€ | MUST |
| FR-3.1.1.2 | ì¸ì¦/ì¸ê°€ íë¦„ íŒ¨í„´ ì‹ë³„ | MUST |
| FR-3.1.1.3 | ì‹œí¬ë¦¿/ìê²©ì¦ëª… íŒ¨í„´ íƒì§€ | MUST |
| FR-3.1.1.4 | ì•”í˜¸í™” ì‚¬ìš© íŒ¨í„´ ì‹ë³„ | SHOULD |
| FR-3.1.1.5 | ë³´ì•ˆ ë³€ê²½ì˜ blast radius ê³„ì‚° | SHOULD |
| FR-3.1.1.6 | ê·œì œ ë¯¼ê° ì½”ë“œ ì˜ì—­ íƒì§€ | MAY |
| FR-3.1.1.7 | ë¯¼ê°ì •ë³´ ì¶œë ¥ íƒì§€ (print/logger) | MUST |
| FR-3.1.1.8 | AUTH_FLOW ëª…ì‹œì  ì„ ì–¸ ì¸ì‹ | MUST |

**FR-3.1.1.1 Trust Boundary íŒ¨í„´ (ìƒì„¸):**

| íŒ¨í„´ ìœ í˜• | ì˜ˆì‹œ | ì„¤ëª… |
|-----------|------|------|
| marker | `TRUST_BOUNDARY = True` | ë³€ìˆ˜ ë§ˆì»¤ |
| marker | `TRUST_BOUNDARY: EXTERNAL API` | docstring í—¤ë” |
| marker | `"""Trust Boundary: ...` | í•¨ìˆ˜ docstring |
| marker | `# TRUST_BOUNDARY` | ì£¼ì„ ë§ˆì»¤ |
| api | `@app.get()`, `@api_view()` | API ì—”ë“œí¬ì¸íŠ¸ |
| auth | `@login_required`, `verify_token()` | ì¸ì¦ ê²½ê³„ |
| data | `@validate`, `sanitize()` | ë°ì´í„° ê²€ì¦ |

**FR-3.1.1.7 ë¯¼ê°ì •ë³´ ì¶œë ¥ íƒì§€ (SECRET_LEAK_PATTERNS):**

| íƒì§€ ëŒ€ìƒ | ì˜ˆì‹œ | ì‹¬ê°ë„ |
|-----------|------|--------|
| print ì¶œë ¥ | `print(password)` | high |
| logger ì¶œë ¥ | `logger.info(api_key)` | medium |
| PII ì¶œë ¥ | `print(patient_id)` | high |

**FR-3.1.1.8 AUTH_FLOW ì„ ì–¸:**

`AUTH_FLOW` ë³€ìˆ˜ê°€ ëª…ì‹œì ìœ¼ë¡œ ì„ ì–¸ë˜ë©´ ì¸ì¦ íë¦„ì´ ì •ì˜ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼:
```python
AUTH_FLOW = "OAuth2"    # ì¸ì¦ í•„ìš”
AUTH_FLOW = "NONE"      # ëª…ì‹œì  ì¸ì¦ ë¶ˆí•„ìš” (íŒŒì¼ ì²˜ë¦¬ ë“±)
```

**ë©”íŠ¸ë¦­:**
- Trust boundary ìˆ˜
- ì¸ì¦ ë ˆì´ì–´ ëª…ì‹œì„± ì ìˆ˜
- Secret lifecycle ìë™í™” ì ìˆ˜
- ë³´ì•ˆ ë³€ê²½ blast radius
- ë¯¼ê°ì •ë³´ ì¶œë ¥ ìœ„ë°˜ ìˆ˜

#### FR-3.1.2 ì¸ì§€ ì¶• (ğŸ§€) ë¶„ì„

**ì…ë ¥:** ì†ŒìŠ¤ ì½”ë“œ AST

**ì¶œë ¥:** ì¸ì§€ ê°€ëŠ¥ ì—¬ë¶€ íŒì • ê²°ê³¼

**í•µì‹¬ ì •ì˜:**

```
ğŸ§€ Cheese = ì‚¬ëŒê³¼ LLMì´ ì¸ì§€í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ ë‚´ì— ìˆëŠ”ê°€?
```

**ì¸ì§€ ê°€ëŠ¥ ì¡°ê±´ (ëª¨ë‘ ì¶©ì¡±í•´ì•¼ í•¨):**

| ì¡°ê±´ | ê¸°ì¤€ | ê·¼ê±° |
|------|------|------|
| ì¤‘ì²© ê¹Šì´ | â‰¤ N (ì„¤ì • ê°€ëŠ¥) | í•œëˆˆì— êµ¬ì¡° íŒŒì•… |
| ê°œë… ìˆ˜ | â‰¤ 9ê°œ/í•¨ìˆ˜ | ì‘ì—… ê¸°ì–µ í•œê³„ (Miller's Law: 7Â±2) |
| ìˆ¨ê²¨ì§„ ì˜ì¡´ì„± | ìµœì†Œí™” | ì»¨í…ìŠ¤íŠ¸ ì™„ê²°ì„± |
| stateÃ—asyncÃ—retry | 2ê°œ ì´ìƒ ê³µì¡´ ê¸ˆì§€ | ë™ì‹œ ì¶”ë¡  ë¶ˆê°€ |

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.1.2.1 | ì¸ì§€ ê°€ëŠ¥ ì—¬ë¶€ íŒì • (4ê°€ì§€ ì¡°ê±´) | MUST |
| FR-3.1.2.2 | stateÃ—asyncÃ—retry ë™ì‹œ ì¡´ì¬ íƒì§€ | MUST |
| FR-3.1.2.3 | ìˆ¨ê²¨ì§„ ì˜ì¡´ì„± íƒì§€ (ì „ì—­, í™˜ê²½ë³€ìˆ˜, ì•”ë¬µì  I/O, í´ë¡œì €) | MUST |
| FR-3.1.2.4 | ì¤‘ì²© ê¹Šì´ ì¸¡ì • | MUST |
| FR-3.1.2.5 | í•¨ìˆ˜ë‹¹ ê°œë… ìˆ˜ ê³„ì‚° (> 9 = ìœ„ë°˜) | MUST |
| FR-3.1.2.6 | ê°œë… ìˆ˜ ê³„ì‚° ì‹œ ì œì™¸ í•­ëª© ì ìš© | MUST |
| FR-3.1.2.7 | Anti-pattern Penalty ì ìš© | MUST |

**FR-3.1.2.6 ê°œë… ìˆ˜ ì œì™¸ í•­ëª©:**

ì¸ì§€ ë¶€í•˜ê°€ ì—†ëŠ” í•­ëª©ì€ ê°œë… ìˆ˜ì—ì„œ ì œì™¸:

| ì œì™¸ í•­ëª© | ì˜ˆì‹œ | ì´ìœ  |
|-----------|------|------|
| self/cls íŒŒë¼ë¯¸í„° | `def method(self, x)` | í´ë˜ìŠ¤ ë©”ì„œë“œ ê·œì•½ |
| Python built-in | `str`, `int`, `len`, `list`, `dict` | ê¸°ë³¸ ì§€ì‹ |
| numpy ê¸°ë³¸ í•¨ìˆ˜ | `array`, `zeros`, `asanyarray` | ë„ë©”ì¸ ê¸°ë³¸ ì§€ì‹ |
| pathlib ê¸°ë³¸ | `Path` | í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ |

**FR-3.1.2.7 Anti-pattern Penalty:**

ê°œë… ìˆ˜ë¥¼ ìˆ¨ê¸°ëŠ” íŒ¨í„´ì— í˜ë„í‹° ë¶€ê³¼:

| Anti-pattern | Penalty | ì´ìœ  |
|--------------|---------|------|
| `*args` ì‚¬ìš© | +3 ê°œë… | ì‹¤ì œ íŒŒë¼ë¯¸í„° ìˆ˜ë¥¼ ìˆ¨ê¹€ |
| `**kwargs` ì‚¬ìš© | +3 ê°œë… | ì‹¤ì œ íŒŒë¼ë¯¸í„° ìˆ˜ë¥¼ ìˆ¨ê¹€ |

```python
# ì˜ˆì‹œ: penalty ì ìš©
def process(*args, **kwargs):  # raw: 1, penalty: +6, total: 7
    return args[0]
```

> ğŸ“„ LLM ê¸ˆì§€ ì‚¬í•­: [LLM_REFACTORING_PROTOCOL.md](./LLM_REFACTORING_PROTOCOL.md)

**ì¶œë ¥:**
- ì¸ì§€ ê°€ëŠ¥ ì—¬ë¶€ (Boolean)
- ìœ„ë°˜ ì‹œ ì‚¬ìœ 
- ê° ì¡°ê±´ë³„ ì¸¡ì •ê°’
- raw_concept_count vs concept_count (penalty í¬í•¨)

#### FR-3.1.3 í–‰ë™ ì¶• (ğŸ¥“) ë¶„ì„

**ì…ë ¥:** ì†ŒìŠ¤ ì½”ë“œ, í…ŒìŠ¤íŠ¸ íŒŒì¼, git íˆìŠ¤í† ë¦¬

**ì¶œë ¥:** ìœ ì§€ë³´ìˆ˜ì„± ê· í˜• ì ìˆ˜

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.1.3.1 | í•µì‹¬ ê²½ë¡œì— ëŒ€í•œ golden test ì¡´ì¬ íƒì§€ | MUST |
| FR-3.1.3.2 | APIì— ëŒ€í•œ contract test ì¡´ì¬ íƒì§€ | MUST |
| FR-3.1.3.3 | í•µì‹¬ ê²½ë¡œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ê³„ì‚° | SHOULD |
| FR-3.1.3.4 | git íˆìŠ¤í† ë¦¬ì—ì„œ ë³€ê²½ ë¦¬ë“œíƒ€ì„ ë¶„ì„ | MAY |
| FR-3.1.3.5 | ê²°í•¨ ìœ ì…ë¥  ë¶„ì„ | MAY |
| FR-3.1.3.6 | PR í¬ê¸° íŒ¨í„´ íƒì§€ | MAY |
| FR-3.1.3.7 | í…ŒìŠ¤íŠ¸ íŒŒì¼ ìë™ íƒìƒ‰ (Test Discovery) | MUST |
| FR-3.1.3.8 | Critical Path íŒ¨í„´ íƒì§€ | MUST |

**FR-3.1.3.7 Test Discovery:**

ì†ŒìŠ¤ íŒŒì¼ì—ì„œ ëŒ€ì‘í•˜ëŠ” í…ŒìŠ¤íŠ¸ íŒŒì¼ ìë™ íƒìƒ‰:

| ì†ŒìŠ¤ íŒŒì¼ | íƒìƒ‰ íŒ¨í„´ |
|-----------|-----------|
| `src/auth/login.py` | `test_login.py`, `login_test.py` |
| `src/auth/login.py` | `tests/test_login.py` |
| `src/auth/login.py` | `tests/auth/test_login.py` |

**FR-3.1.3.8 Critical Path íŒ¨í„´:**

| path_type | íƒì§€ íŒ¨í„´ | ì˜ˆì‹œ |
|-----------|-----------|------|
| payment | `process_payment`, `stripe.Charge`, `charge()` | ê²°ì œ ì²˜ë¦¬ |
| auth | `login`, `authenticate`, `register` | ì¸ì¦/ì¸ê°€ |
| data_mutation | `db.session.commit()`, `.save()`, `create_*` | ë°ì´í„° ë³€ê²½ |
| external_api | `requests.get/post`, `http.client` | ì™¸ë¶€ API í˜¸ì¶œ |

**Critical Path ë³´í˜¸ ìƒíƒœ:**

```python
@dataclass
class CriticalPath:
    function_name: str
    path_type: str      # payment, auth, data_mutation, external_api
    line: int
    protected: bool     # í…ŒìŠ¤íŠ¸ ì¡´ì¬ ì—¬ë¶€
```

**ë©”íŠ¸ë¦­:**
- Golden test ì»¤ë²„ë¦¬ì§€ ë¹„ìœ¨
- Contract test ì¡´ì¬ í”Œë˜ê·¸
- í•µì‹¬ ê²½ë¡œ ë³´í˜¸ ë¹„ìœ¨
- ë³€ê²½ ë¦¬ë“œíƒ€ì„ (git ê¸°ë°˜)
- ê²°í•¨ ìœ ì…ë¥  (git ê¸°ë°˜)

### 3.2 ëª¨ë“ˆ íƒ€ì… ë¶„ë¥˜

#### FR-3.2.1 ì£¼ìš” ëª¨ë“ˆ íƒ€ì…

| íƒ€ì… | ì„¤ëª… | ê¸°ë³¸ ğŸğŸ§€ğŸ¥“ ë¹„ìœ¨ |
|------|------|------------------|
| `deploy` | K8s, Helm, ArgoCD, secrets, network policy | 70 / 10 / 20 |
| `api-external` | ê³ ê°/3rd-party ëŒ€ë©´, ê³„ì•½ êµ¬ì† | 50 / 20 / 30 |
| `api-internal` | ì„œë¹„ìŠ¤ê°„ í†µì‹ , ë‚´ë¶€ ì•ˆì •ì„± | 30 / 30 / 40 |
| `app` | ì›Œí¬í”Œë¡œìš°, ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜, ìƒíƒœ ë¨¸ì‹  | 20 / 50 / 30 |
| `lib-domain` | ìˆœìˆ˜ ë„ë©”ì¸ ë¡œì§, ê·œì¹™, ê²€ì¦ | 10 / 30 / 60 |
| `lib-infra` | ê³µí†µ í´ë¼ì´ì–¸íŠ¸, ë¯¸ë“¤ì›¨ì–´, ìœ í‹¸ë¦¬í‹° | 20 / 30 / 50 |

#### FR-3.2.2 ëª¨ë“ˆ íƒ€ì… íƒì§€

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.2.2.1 | íŒŒì¼ ê²½ë¡œ íŒ¨í„´ì—ì„œ ëª¨ë“ˆ íƒ€ì… ìë™ íƒì§€ | MUST |
| FR-3.2.2.2 | ì„¤ì •ì„ í†µí•œ ìˆ˜ë™ ì˜¤ë²„ë¼ì´ë“œ í—ˆìš© | MUST |
| FR-3.2.2.3 | ì»¤ìŠ¤í…€ ë¹„ìœ¨ì„ ê°€ì§„ ì»¤ìŠ¤í…€ ëª¨ë“ˆ íƒ€ì… ì§€ì› | SHOULD |

### 3.3 Canonical Profile ì‹œìŠ¤í…œ

#### FR-3.3.1 í”„ë¡œíŒŒì¼ ì •ì˜

ê° ëª¨ë“ˆ íƒ€ì…ì€ ë‹¤ìŒì„ ì •ì˜í•˜ëŠ” canonical profileì„ ê°€ì§:

```typescript
interface CanonicalProfile {
  moduleType: ModuleType;

  // ê¸°ëŒ€ ğŸğŸ§€ğŸ¥“ ë¹„ìœ¨ (í•©ê³„ 100)
  bread: number;    // Security ê°€ì¤‘ì¹˜
  cheese: number;   // Cognitive ê°€ì¤‘ì¹˜
  ham: number;      // Behavioral ê°€ì¤‘ì¹˜

  // ê° ì¶•ì˜ ì„ê³„ê°’
  thresholds: {
    bread: { min: number; max: number };
    cheese: { min: number; max: number };
    ham: { min: number; max: number };
  };

  // PRë‹¹ ë³€ê²½ ì˜ˆì‚°
  changeBudget: {
    deltaCognitive: number;
    deltaStateTransitions: number;
    deltaPublicApi: number;
    breakingChangesAllowed: boolean;
  };
}
```

#### FR-3.3.2 í¸ì°¨ ë¶„ì„

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.3.2.1 | ëª¨ë“ˆì˜ í˜„ì¬ ğŸğŸ§€ğŸ¥“ ë¹„ìœ¨ ê³„ì‚° | MUST |
| FR-3.3.2.2 | canonical profileê³¼ ë¹„êµ | MUST |
| FR-3.3.2.3 | ì–´ë–¤ ì¶•ì´ ê³¼ë‹¤/ê³¼ì†Œì¸ì§€ ì‹ë³„ | MUST |
| FR-3.3.2.4 | canonical centroidê¹Œì§€ì˜ ê±°ë¦¬ ê³„ì‚° | SHOULD |
| FR-3.3.2.5 | ê· í˜•ì ìœ¼ë¡œ ì´ë™í•  ë°©í–¥ ì œì•ˆ | MUST |

### 3.4 Simplex ë¼ë²¨ë§ ì‹œìŠ¤í…œ

#### FR-3.4.1 ëª¨ë“ˆ/PR ë¼ë²¨ë§

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.4.1.1 | ê° ëª¨ë“ˆì— ìš°ì„¸ ë¼ë²¨ (ğŸ/ğŸ§€/ğŸ¥“) ë¶€ì—¬ | MUST |
| FR-3.4.1.2 | ë³€ê²½ ê¸°ë°˜ìœ¼ë¡œ ê° PRì— ìš°ì„¸ ë¼ë²¨ ë¶€ì—¬ | MUST |
| FR-3.4.1.3 | ì½”ë“œë² ì´ìŠ¤ ì „ì²´ì˜ ë¼ë²¨ ë¶„í¬ ì¶”ì  | SHOULD |

**ë¼ë²¨ë§ ê·œì¹™:**

```
ğŸ ë¼ë²¨: ë³´ì•ˆ ì œì•½ì´ ìš°ì„¸
  - ì¸ì¦/ì¸ê°€ ë³€ê²½
  - ì•”í˜¸í™” ë³€ê²½
  - ì‹ ë¢° ê²½ê³„ ìˆ˜ì •
  - ê·œì œ ë¯¼ê° ì½”ë“œ

ğŸ§€ ë¼ë²¨: ë§¥ë½ ë°€ë„ê°€ ìš°ì„¸
  - ë†’ì€ cognitive complexity
  - StateÃ—asyncÃ—retry ë™ì‹œ ì¡´ì¬
  - ìˆ¨ì€ ê²°í•© ì¦ê°€

ğŸ¥“ ë¼ë²¨: ìœ ì§€ë³´ìˆ˜ì„±ì´ ìš°ì„¸
  - ë¦¬íŒ©í† ë§ PR
  - í…ŒìŠ¤íŠ¸ ì¶”ê°€
  - API surface ë³€ê²½
  - ë¬¸ì„œí™”
```

#### FR-3.4.2 ê· í˜•ì  íƒì§€

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.4.2.1 | ëª¨ë“ˆì´ ê· í˜• ì˜ì—­ì— ìˆëŠ”ì§€ íƒì§€ | MUST |
| FR-3.4.2.2 | ì½”ë“œë² ì´ìŠ¤ì— ğŸğŸ§€ğŸ¥“ ì™„ì „ simplexê°€ ìˆëŠ”ì§€ íƒì§€ | SHOULD |
| FR-3.4.2.3 | ê· í˜•ì  ë°©í–¥ì˜ gradient ì œê³µ | MUST |

### 3.5 ê²Œì´íŠ¸ ì‹œìŠ¤í…œ

#### 3ë‹¨ê³„ Gate ê°œìš”

| ë‹¨ê³„ | ì—„ê²©ë„ | Waiver | ìš©ë„ |
|------|--------|--------|------|
| **PoC** | ëŠìŠ¨ | âŒ | ë¹ ë¥¸ ê²€ì¦, ì¼ë‹¨ ëŒì•„ê°€ë©´ OK |
| **MVP** | ë°”ì‹¹ | âŒ | ì²« ë¦´ë¦¬ìŠ¤, ì œëŒ€ë¡œ ì„¤ê³„ ê°•ì œ |
| **Production** | ì—„ê²© | âœ… | ìš´ì˜ ì¤‘ ì…ì¦ëœ ê¸°ìˆ ë¶€ì±„ í—ˆìš© |

**ì„ê³„ê°’ ë¹„êµ:**

| ì¡°ê±´ | PoC | MVP | Production |
|------|-----|-----|------------|
| nesting_max | 6 | 4 | 3 |
| concepts_per_function | 12 | 9 | 7 |
| test_coverage | 50% | 80% | 95% |

**ê¸°ì¤€ì  ê¸°ë°˜ ê³„ì‚°:**
```python
BASE_THRESHOLDS = {
    "nesting_max": 4,           # MVP ê¸°ì¤€
    "concepts_per_function": 9,
    "golden_test_min": 0.8,
}
# PoC: +2, +3, -0.3 ì¡°ì •
# MVP: ê¸°ì¤€ (ì¡°ì • ì—†ìŒ)
# Production: -1, -2, +0.15 ì¡°ì •
```

#### FR-3.5.0 PoC ê²Œì´íŠ¸

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.5.0.1 | ğŸ§€ ì²´í¬: nesting â‰¤ 6 | MUST |
| FR-3.5.0.2 | ğŸ§€ ì²´í¬: concepts â‰¤ 12 | MUST |
| FR-3.5.0.3 | ğŸ¥“ ì²´í¬: test_coverage â‰¥ 50% | SHOULD |
| FR-3.5.0.4 | Waiver ë¶ˆí—ˆ | MUST |

#### FR-3.5.1 MVP ì§„ì… ê²Œì´íŠ¸

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.5.1.1 | ğŸ ì²´í¬: Trust boundary ëª…ì‹œì  ì •ì˜ | MUST |
| FR-3.5.1.2 | ğŸ ì²´í¬: ì¸ì¦/ì¸ê°€ íë¦„ ê³ ì • (AUTH_FLOW) | MUST |
| FR-3.5.1.3 | ğŸ§€ ì²´í¬: nesting â‰¤ 4 | MUST |
| FR-3.5.1.4 | ğŸ§€ ì²´í¬: concepts â‰¤ 9 | MUST |
| FR-3.5.1.5 | ğŸ§€ ì²´í¬: stateÃ—asyncÃ—retry ìœ„ë°˜ ì—†ìŒ | MUST |
| FR-3.5.1.6 | ğŸ¥“ ì²´í¬: test_coverage â‰¥ 80% | MUST |
| FR-3.5.1.7 | Waiver ë¶ˆí—ˆ | MUST |
| FR-3.5.1.8 | í•˜ë‚˜ë¼ë„ ì‹¤íŒ¨ ì‹œ "ìƒŒë“œìœ„ì¹˜ ë¯¸í˜•ì„±" ë°˜í™˜ | MUST |

#### FR-3.5.2 Production ê²Œì´íŠ¸

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.5.2.1 | MVP ì¡°ê±´ ëª¨ë‘ ì¶©ì¡± | MUST |
| FR-3.5.2.2 | ğŸ§€ ì²´í¬: nesting â‰¤ 3 | MUST |
| FR-3.5.2.3 | ğŸ§€ ì²´í¬: concepts â‰¤ 7 | MUST |
| FR-3.5.2.4 | ğŸ¥“ ì²´í¬: test_coverage â‰¥ 95% | MUST |
| FR-3.5.2.5 | Essential Complexity Waiver í—ˆìš© | MUST |

#### FR-3.5.3 PR ê²Œì´íŠ¸

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.5.3.1 | PRì˜ change budget ì²´í¬ | MUST |
| FR-3.5.3.2 | ë³´í˜¸êµ¬ì—­ ìˆ˜ì • íƒì§€ | MUST |
| FR-3.5.3.3 | ğŸ ë³€ê²½ ì‹œ ADR ìš”êµ¬ | MUST |
| FR-3.5.3.4 | ğŸ¥“ í–‰ë™ ë³€ê²½ì€ ë‹¨ì¼ ëª©ì  ìš”êµ¬ | SHOULD |
| FR-3.5.3.5 | ğŸ§€ ê°ì†Œ PRì€ ììœ ë¡­ê²Œ í—ˆìš© | MUST |

**ê²Œì´íŠ¸ ê²°ê³¼ íƒ€ì…:**

```typescript
interface GateResult {
  gate: 'poc' | 'mvp' | 'production';
  passed: boolean;
  sandwichFormed: boolean;

  bread: {
    passed: boolean;
    trustBoundaryDefined: boolean;
    authFlowFixed: boolean;
    violations: string[];
  };

  cheese: {
    passed: boolean;
    maxNesting: number;
    maxConcepts: number;
    stateAsyncRetryViolations: string[];
  };

  ham: {
    passed: boolean;
    goldenTestCoverage: number;
    criticalPathsProtected: number;
    criticalPathsTotal: number;
  };

  waiver?: {
    applied: boolean;
    adrPath: string;
  };
}
```

### 3.6 Change Budget ì‹œìŠ¤í…œ

#### FR-3.6.1 ì˜ˆì‚° ì •ì˜

| ëª¨ë“ˆ íƒ€ì… | Î”Cognitive | Î”State | Î”PublicAPI | Breaking |
|----------|------------|--------|------------|----------|
| api-external | â‰¤ 3 | â‰¤ 1 | â‰¤ 2 | NO |
| api-internal | â‰¤ 5 | â‰¤ 2 | â‰¤ 3 | ADR í•„ìš” |
| app | â‰¤ 8 | â‰¤ 3 | N/A | N/A |
| lib-domain | â‰¤ 5 | â‰¤ 2 | â‰¤ 5 | ADR í•„ìš” |
| lib-infra | â‰¤ 8 | â‰¤ 3 | â‰¤ 3 | ADR í•„ìš” |
| deploy | â‰¤ 2 | N/A | N/A | ADR + ë³´ì•ˆ ë¦¬ë·° |

#### FR-3.6.2 ì˜ˆì‚° ì¶”ì 

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.6.2.1 | PRë‹¹ ê° ì¶•ì˜ delta ê³„ì‚° | MUST |
| FR-3.6.2.2 | ëª¨ë“ˆ íƒ€ì… ì˜ˆì‚°ê³¼ ë¹„êµ | MUST |
| FR-3.6.2.3 | ì˜ˆì‚° ìœ„ë°˜ ë³´ê³  | MUST |
| FR-3.6.2.4 | ì‹œê°„ì— ë”°ë¥¸ ëˆ„ì  ì˜ˆì‚° ì¶”ì  | MAY |

### 3.7 ë³´í˜¸êµ¬ì—­ ì‹œìŠ¤í…œ

#### FR-3.7.1 ì˜ì—­ ì •ì˜

**Deploy Repository ë³´í˜¸êµ¬ì—­:**
- `*/rbac/*`
- `*/network-policy/*`
- `*/ingress/*`
- `*/tls/*`
- `*/secrets/*`
- `*/sealed-secrets/*`

**Source Repository ë³´í˜¸êµ¬ì—­:**
- `*/auth/*`, `*/authn/*`, `*/authz/*`
- `*/crypto/*`, `*/encryption/*`
- `*/patient-data/*`, `*/phi/*`, `*/pii/*`
- `*/audit/*`, `*/logging/audit*`

#### FR-3.7.2 ì˜ì—­ ê°•ì œ

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.7.2.1 | ë³´í˜¸êµ¬ì—­ ìˆ˜ì • íƒì§€ | MUST |
| FR-3.7.2.2 | ë³´í˜¸êµ¬ì—­ ë³€ê²½ ì‹œ ADR ì°¸ì¡° ìš”êµ¬ | MUST |
| FR-3.7.2.3 | ì¶”ê°€ í…ŒìŠ¤íŠ¸ ì¦ê±° ìš”êµ¬ | SHOULD |
| FR-3.7.2.4 | ì»¤ìŠ¤í…€ ë³´í˜¸êµ¬ì—­ íŒ¨í„´ ì§€ì› | MUST |

### 3.8 ì¸ì§€ê¸°ëŠ¥ì €í•˜ íƒì§€

#### FR-3.8.1 ì €í•˜ ì²´í¬ë¦¬ìŠ¤íŠ¸

ë‹¤ìŒ ì¡°ê±´ ì¤‘ **2ê°œ ì´ìƒ** ì¶©ì¡± ì‹œ ì¸ì§€ê¸°ëŠ¥ì €í•˜ íƒì§€:

| # | ì¡°ê±´ | íƒì§€ ë°©ë²• |
|---|------|----------|
| 1 | ì•”ë¬µì  ì»¨í…ìŠ¤íŠ¸ ì˜ì¡´ â‰¥ 2ê°œ | ìˆ¨ì€ ê²°í•© ë¶„ì„ |
| 2 | stateÃ—asyncÃ—retry ë™ì‹œ ì¡´ì¬ | AST íŒ¨í„´ íƒì§€ |
| 3 | PRì´ í•µì‹¬ íŒŒì¼ â‰¥ 25ê°œ ìˆ˜ì • | Git diff ë¶„ì„ |
| 4 | golden/contract test ë¶€ì¬ | í…ŒìŠ¤íŠ¸ íŒŒì¼ íƒì§€ |
| 5 | í–‰ë™ ì„¤ëª… ì–´ë ¤ì›€ | (ìˆ˜ë™ í”Œë˜ê·¸) |
| 6 | ì˜¨ë³´ë”© 30ë¶„ ë‚´ ì„¤ëª… ë¶ˆê°€ | (ìˆ˜ë™ í”Œë˜ê·¸) |

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.8.1.1 | ìë™í™” ê°€ëŠ¥í•œ ì¡°ê±´ (1-4) ì²´í¬ | MUST |
| FR-3.8.1.2 | ìœ„ë°˜ ìˆ˜ ì¹´ìš´íŠ¸ ë° â‰¥ 2 ì„ê³„ê°’ | MUST |
| FR-3.8.1.3 | ì €í•˜ êµ¬ì—­ ìƒíƒœ ë³´ê³  | MUST |
| FR-3.8.1.4 | ì¡°ê±´ 5-6ì— ëŒ€í•œ ìˆ˜ë™ í”Œë˜ê·¸ ì§€ì› | MAY |

### 3.9 ì¶”ì²œ ì‹œìŠ¤í…œ

#### FR-3.9.1 Gradient ê¸°ë°˜ ì¶”ì²œ

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.9.1.1 | ê· í˜•ì  ë°©í–¥ì˜ gradient ê³„ì‚° | MUST |
| FR-3.9.1.2 | êµ¬ì²´ì  ë¦¬íŒ©í† ë§ ì•¡ì…˜ ì œì•ˆ | MUST |
| FR-3.9.1.3 | ì˜ˆìƒ ì˜í–¥ìœ¼ë¡œ ìš°ì„ ìˆœìœ„ ì§€ì • | SHOULD |
| FR-3.9.1.4 | ëª¨ë“ˆ íƒ€ì… ì œì•½ ì¤€ìˆ˜ | MUST |

**ì¶”ì²œ í˜•ì‹:**

```typescript
interface Recommendation {
  axis: 'ğŸ' | 'ğŸ§€' | 'ğŸ¥“';
  priority: number;
  action: string;
  expectedImpact: {
    deltaBread: number;
    deltaCheese: number;
    deltaHam: number;
  };
  targetEquilibrium: boolean;
}
```

### 3.10 Essential Complexity Waiver

ë³¸ì§ˆì  ë³µì¡ë„(Essential Complexity)ì™€ ìš°ë°œì  ë³µì¡ë„(Accidental Complexity)ë¥¼ êµ¬ë¶„í•˜ì—¬,
ë³¸ì§ˆì ìœ¼ë¡œ ë³µì¡í•œ ì½”ë“œì— ëŒ€í•´ Gate ê²€ì‚¬ë¥¼ ìœ ì˜ˆí•©ë‹ˆë‹¤.

#### FR-3.10.1 Waiver ì‹œìŠ¤í…œ

**ìš”êµ¬ì‚¬í•­:**

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| FR-3.10.1.1 | `__essential_complexity__` ë§ˆì»¤ ì¸ì‹ | MUST |
| FR-3.10.1.2 | ADR íŒŒì¼ ì°¸ì¡° ê²€ì¦ | MUST |
| FR-3.10.1.3 | Production Gateì—ì„œë§Œ Waiver ì ìš© | MUST |
| FR-3.10.1.4 | PoC/MVP Gateì—ì„œ Waiver ë¶ˆí—ˆ | MUST |
| FR-3.10.1.5 | ë³¸ì§ˆì  ë³µì¡ë„ ì‹ í˜¸ íƒì§€ | SHOULD |

**Waiver ì„ ì–¸ í˜•ì‹:**

```python
__module_type__ = "lib/domain"
__essential_complexity__ = {
    "adr": "docs/adr/003-inference.md",
}
```

**ë³¸ì§ˆì  ë³µì¡ë„ ì‹ í˜¸ (ìë™ íƒì§€):**

| ì¹´í…Œê³ ë¦¬ | ì‹ í˜¸ ì˜ˆì‹œ | ì„¤ëª… |
|----------|-----------|------|
| math | `np.linalg`, `torch.matmul`, `fft` | ìˆ˜í•™ ì—°ì‚° |
| algorithm | `memo[`, `visited`, `heapq` | ì•Œê³ ë¦¬ì¦˜ íŒ¨í„´ |
| domain | `voxel`, `segmentation`, `cipher` | ë„ë©”ì¸ íŠ¹í™” |

**Waiver ë™ì‘:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Gate ê²€ì‚¬                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. __essential_complexity__ ë§ˆì»¤ í™•ì¸                        â”‚
â”‚ 2. ADR íŒŒì¼ ì¡´ì¬ í™•ì¸                                        â”‚
â”‚ 3. Gate íƒ€ì… í™•ì¸                                            â”‚
â”‚    - PoC/MVP: Waiver ë¶ˆí—ˆ â†’ ê²€ì‚¬ ì‹¤í–‰                        â”‚
â”‚    - Production: Waiver í—ˆìš© â†’ ê²€ì‚¬ ìš°íšŒ                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**LLM ê¸ˆì§€ ì‚¬í•­:**

> âš ï¸ LLMì€ `__essential_complexity__` ì„ ì–¸ ë° ADR íŒŒì¼ì„ ìƒì„±/ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
> ë¦¬íŒ©í† ë§ ëŒ€ì‹  ë©´ì œë¡œ ë„í”¼í•˜ëŠ” ê²ƒì„ ë°©ì§€í•©ë‹ˆë‹¤.

> ğŸ“„ ìƒì„¸: [LLM_REFACTORING_PROTOCOL.md](./LLM_REFACTORING_PROTOCOL.md)

---

## 4. ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­

### 4.1 ì„±ëŠ¥

| ID | ìš”êµ¬ì‚¬í•­ | ëª©í‘œ |
|----|----------|------|
| NFR-4.1.1 | ë‹¨ì¼ íŒŒì¼ ë¶„ì„ | < 100ms |
| NFR-4.1.2 | ì „ì²´ í”„ë¡œì íŠ¸ ë¶„ì„ (1000 íŒŒì¼) | < 30s |
| NFR-4.1.3 | PR delta ë¶„ì„ | < 5s |

### 4.2 ì •í™•ë„

| ID | ìš”êµ¬ì‚¬í•­ | ëª©í‘œ |
|----|----------|------|
| NFR-4.2.1 | ì¸ì§€ ê°€ëŠ¥ ì¡°ê±´ íŒì • ì •í™•ë„ | 95% |
| NFR-4.2.2 | ëª¨ë“ˆ íƒ€ì… ìë™ íƒì§€ ì •í™•ë„ | 90% |
| NFR-4.2.3 | ìœ„ë°˜ false positive ë¹„ìœ¨ | < 10% |

### 4.3 í™•ì¥ì„±

| ID | ìš”êµ¬ì‚¬í•­ |
|----|----------|
| NFR-4.3.1 | ì»¤ìŠ¤í…€ ëª¨ë“ˆ íƒ€ì… ì§€ì› |
| NFR-4.3.2 | ì»¤ìŠ¤í…€ canonical profile ì§€ì› |
| NFR-4.3.3 | ì»¤ìŠ¤í…€ ë³´í˜¸êµ¬ì—­ íŒ¨í„´ ì§€ì› |
| NFR-4.3.4 | ìƒˆ ë¶„ì„ê¸°ë¥¼ ìœ„í•œ í”ŒëŸ¬ê·¸ì¸ ì•„í‚¤í…ì²˜ |

### 4.4 ì–¸ì–´ ì§€ì›

| ID | ìš”êµ¬ì‚¬í•­ | ìš°ì„ ìˆœìœ„ |
|----|----------|----------|
| NFR-4.4.1 | TypeScript/JavaScript | MUST |
| NFR-4.4.2 | Python | MUST |
| NFR-4.4.3 | Go | MUST |
| NFR-4.4.4 | LSPë¥¼ í†µí•œ ê¸°íƒ€ ì–¸ì–´ | MAY |

---

## 5. ì¸í„°í˜ì´ìŠ¤ ìš”êµ¬ì‚¬í•­

### 5.1 CLI ì¸í„°í˜ì´ìŠ¤

```bash
# ğŸğŸ§€ğŸ¥“ ì¶œë ¥ìœ¼ë¡œ ë¶„ì„
semantic-complexity analyze ./src --format sandwich

# MVP ê²Œì´íŠ¸ ì²´í¬
semantic-complexity gate mvp ./src

# PR ì˜ˆì‚° ì²´í¬
semantic-complexity budget ./src --base main --head feature

# ëª¨ë“ˆ ë¼ë²¨ë§
semantic-complexity label ./src/auth
```

### 5.2 MCP (Model Context Protocol) ì¸í„°í˜ì´ìŠ¤

```typescript
// ë„êµ¬ë“¤
- analyze_sandwich(path, moduleType)
- check_gate(path, gateType)
- check_budget(baseBranch, headBranch)
- get_label(path)
- suggest_refactor(path)
- check_degradation(path)
```

### 5.3 ì¶œë ¥ í˜•ì‹

#### 5.3.1 Sandwich í˜•ì‹

```json
{
  "module": "src/auth",
  "moduleType": "api-external",
  "sandwich": {
    "bread": 45,
    "cheese": 25,
    "ham": 30,
    "canonical": { "bread": 50, "cheese": 20, "ham": 30 },
    "deviation": { "bread": -5, "cheese": +5, "ham": 0 },
    "label": "ğŸ§€",
    "inEquilibrium": false
  },
  "recommendations": [
    {
      "axis": "ğŸ§€",
      "action": "ìƒíƒœ ë¨¸ì‹ ì„ ë³„ë„ ëª¨ë“ˆë¡œ ì¶”ì¶œ",
      "expectedImpact": { "cheese": -8 }
    }
  ]
}
```

#### 5.3.2 Gate í˜•ì‹

```json
{
  "gate": "mvp",
  "passed": false,
  "sandwichFormed": false,
  "axes": {
    "bread": { "passed": true, "details": "..." },
    "cheese": { "passed": false, "violations": ["OrderServiceì— stateÃ—asyncÃ—retry ì¡´ì¬"] },
    "ham": { "passed": true, "details": "..." }
  }
}
```

---

## 6. ë°ì´í„° ëª¨ë¸

### 6.1 í•µì‹¬ íƒ€ì…

```typescript
type Axis = 'ğŸ' | 'ğŸ§€' | 'ğŸ¥“';

type ModuleType =
  | 'deploy'
  | 'api-external'
  | 'api-internal'
  | 'app'
  | 'lib-domain'
  | 'lib-infra';

interface SandwichScore {
  bread: number;      // 0-100
  cheese: number;     // 0-100
  ham: number;        // 0-100
  // bread + cheese + ham = 100
}

interface CanonicalProfile {
  moduleType: ModuleType;
  canonical: SandwichScore;
  thresholds: Record<Axis, { min: number; max: number }>;
  changeBudget: ChangeBudget;
}

interface ModuleAnalysis {
  path: string;
  moduleType: ModuleType;
  current: SandwichScore;
  canonical: SandwichScore;
  deviation: SandwichScore;
  label: Axis;
  inEquilibrium: boolean;
  violations: Violation[];
  recommendations: Recommendation[];
}
```

### 6.2 ë¶ˆë³€ì¡°ê±´ íƒ€ì…

```typescript
interface CognitiveInvariant {
  // state Ã— async Ã— retryëŠ” ê³µì¡´ ë¶ˆê°€
  hasState: boolean;
  hasAsync: boolean;
  hasRetry: boolean;
  violated: boolean;
}

interface HiddenCoupling {
  globalAccess: string[];
  implicitIO: string[];
  envDependency: string[];
  closureCaptures: string[];
  total: number;
  threshold: number;
  violated: boolean;
}
```

---

## 7. ì œì•½ì‚¬í•­

### 7.1 ìˆ˜í•™ì  ì œì•½

1. **Simplex ì œì•½**: bread + cheese + ham = 100
2. **ë¹„ìŒìˆ˜ì„±**: ëª¨ë“  ì¶• â‰¥ 0
3. **ìŠˆí˜ë¥´ë„ˆ ì¡°ê±´**: ê²½ê³„ ë¼ë²¨ë§ì´ ì¼ê´€ì„± ìˆì–´ì•¼ í•¨

### 7.2 ê³µí•™ì  ì œì•½

1. **ì¸ì§€ ë¶ˆë³€ì¡°ê±´**: state Ã— async Ã— retryëŠ” ê°™ì€ í•¨ìˆ˜/ëª¨ë“ˆì— ê³µì¡´ ë¶ˆê°€
2. **ë³´í˜¸êµ¬ì—­**: ë³€ê²½ ì‹œ ADR + ì¦ê±° í•„ìš”
3. **Change Budget**: ë¸íƒ€ê°€ ëª¨ë“ˆ íƒ€ì… í•œë„ë¥¼ ì´ˆê³¼í•˜ë©´ ì•ˆ ë¨

### 7.3 êµ¬í˜„ ì œì•½

1. ğŸ§€ ì¶•ì€ ì¸ì§€ ê°€ëŠ¥ ì—¬ë¶€ 4ê°€ì§€ ì¡°ê±´ìœ¼ë¡œ íŒì •
2. ì ì§„ì  ë¶„ì„ ì§€ì› í•„ìˆ˜ (PR ìˆ˜ì¤€)
3. delta ë¶„ì„ì„ ìœ„í•´ gitê³¼ í†µí•© í•„ìˆ˜

---

## 8. ë¶€ë¡

### A. ì¸ì§€ ê°€ëŠ¥ ì¡°ê±´ (ğŸ§€)

```
ğŸ§€ Cheese = ì‚¬ëŒê³¼ LLMì´ ì¸ì§€í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ ë‚´ì— ìˆëŠ”ê°€?

ì¸ì§€ ê°€ëŠ¥ ì¡°ê±´ (ëª¨ë‘ ì¶©ì¡±):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ì¤‘ì²© ê¹Šì´ â‰¤ N        - í•œëˆˆì— êµ¬ì¡° íŒŒì•… ê°€ëŠ¥             â”‚
â”‚ 2. ê°œë… ìˆ˜ â‰¤ 9/í•¨ìˆ˜      - ì‘ì—… ê¸°ì–µ(Working Memory) í•œê³„   â”‚
â”‚ 3. ìˆ¨ê²¨ì§„ ì˜ì¡´ì„± ìµœì†Œ    - ì»¨í…ìŠ¤íŠ¸ ì™„ê²°ì„±                  â”‚
â”‚ 4. stateÃ—asyncÃ—retry    - 2ê°œ ì´ìƒ ê³µì¡´ ê¸ˆì§€ (ë™ì‹œ ì¶”ë¡  ë¶ˆê°€)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ìœ„ë°˜ ì‹œ â†’ ì¸ì§€ ë¶ˆê°€ (ğŸ§€ ì‹¤íŒ¨)
```

### B. ìŠˆí˜ë¥´ë„ˆ ì •ë¦¬ ì ìš©

```
2-Simplex: ğŸ, ğŸ§€, ğŸ¥“ ê¼­ì§“ì ì„ ê°€ì§„ ì‚¼ê°í˜•

ì„¸ë¶„í™”: ê° ëª¨ë“ˆ/PRì´ ë¶€ë¶„ ì‚¼ê°í˜•

ë¼ë²¨ë§: ê° ë¶€ë¶„ ì‚¼ê°í˜• ê¼­ì§“ì ì— ìš°ì„¸ ì¶• ë¼ë²¨

ì •ë¦¬: ì„¸ ë¼ë²¨ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” ë¶€ë¶„ ì‚¼ê°í˜•ì´ ì ì–´ë„ í•˜ë‚˜ ì¡´ì¬

ê³µí•™: ê· í˜• ì¡íŒ ì„¤ê³„ ì§€ì ì´ ë°˜ë“œì‹œ ì¡´ì¬
```

### C. ëª¨ë“ˆ íƒ€ì… íƒì§€ íŒ¨í„´

```typescript
const MODULE_PATTERNS = {
  'deploy': [
    '**/k8s/**', '**/helm/**', '**/deploy/**',
    '**/manifests/**', '**/.github/workflows/**'
  ],
  'api-external': [
    '**/api/external/**', '**/api/public/**',
    '**/routes/v*/**'
  ],
  'api-internal': [
    '**/api/internal/**', '**/grpc/**',
    '**/events/**'
  ],
  'app': [
    '**/app/**', '**/services/**',
    '**/workflows/**', '**/jobs/**'
  ],
  'lib-domain': [
    '**/domain/**', '**/models/**',
    '**/rules/**', '**/validators/**'
  ],
  'lib-infra': [
    '**/lib/**', '**/utils/**',
    '**/common/**', '**/shared/**'
  ]
};
```

---

## ë¬¸ì„œ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ         | ì‘ì„±ì | ë³€ê²½ì‚¬í•­ |
|------|------------|--------|----------|
| 1.0 | 2025-12-24 | semantic-complexity team | ì´ë¡ ì  í† ëŒ€ ê¸°ë°˜ ì´ˆê¸° SRS |
| 1.1 | 2026-01-01 | semantic-complexity team | 2.5ì ˆ ì´ë¡  ê³„ì¸µ êµ¬ì¡° ì¶”ê°€ (5Dâ†’3ì¶• ì‚¬ì˜ ê´€ê³„ ëª…í™•í™”) |
| 1.2 | 2026-01-01 | semantic-complexity team | FR-3.1.1~3.1.3 íŒ¨í„´ ë³´ì¶©, FR-3.5 3ë‹¨ê³„ Gate ì²´ê³„, FR-3.10 Essential Complexity Waiver ì¶”ê°€ |
